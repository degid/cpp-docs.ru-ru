---
title: Перенаправление типов (C++/CLI)
ms.date: 10/12/2018
ms.topic: reference
helpviewer_keywords:
- type forwarding, C++
ms.assetid: ae730b69-0c27-41cc-84e1-3132783866ea
ms.openlocfilehash: 0803ecc2ffb2da2748b1ef063481aa2571f27f50
ms.sourcegitcommit: 857fa6b530224fa6c18675138043aba9aa0619fb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/24/2020
ms.locfileid: "80171935"
---
# <a name="type-forwarding-ccli"></a>Перенаправление типов (C++/CLI)

*Перенаправление типов* позволяет переместить тип из одной сборки (А) в другую (Б), чтобы не компилировать повторно клиенты, использующие сборку А.

## <a name="windows-runtime"></a>Среда выполнения Windows

В среде выполнения Windows эта функция языка не поддерживается.

## <a name="common-language-runtime"></a>Среда CLR

В следующем примере кода показано использование перенаправления типа.

### <a name="syntax"></a>Синтаксис

```cpp
#using "new.dll"
[assembly:TypeForwardedTo(type::typeid)];
```

### <a name="parameters"></a>Параметры

*новую*<br/>
Сборка, в которую перемещается определение типа.

*type*<br/>
Тип, определение которого перемещается в другую сборку.

### <a name="remarks"></a>Примечания

После поставки компонента (сборки) и его использования клиентскими приложениями можно применить перенаправление типа, чтобы переместить тип из этого компонента (сборки) в другую сборку. После поставки обновленного компонента (и всех необходимых дополнительных сборок) клиентские приложения будут работать без повторной компиляции.

Перенаправление типа работает только для компонентов, на которые ссылаются существующие приложения. При повторной сборке приложения для всех используемых в нем типов должны иметься соответствующие ссылки на сборки.

При перенаправлении типа (типа А) из сборки необходимо добавить для него атрибут `TypeForwardedTo`, а также ссылку на сборку. Сборка, на которую осуществляется ссылка, должна содержать один из следующих элементов:

- определение типа А;

- атрибут `TypeForwardedTo` для типа А и ссылку на сборку.

Примеры типов, которые могут переадресовываться:

- классы ссылок;

- классы значений;

- перечисления

- интерфейсы

Перечисленные ниже типы переадресовывать нельзя:

- Универсальные типы

- собственные типы;

- вложенные типы (если требуется переадресовать вложенный тип, следует переадресовать включающий его тип).

Тип можно переадресовать сборке, созданной на любом языке среды CLR.

Таким образом, если файл исходного кода, используемый для создания сборки A.dll, содержит определение типа (`ref class MyClass`), которое требуется переместить в сборку B.dll, выполните следующие действия.

1. Переместите определение типа `MyClass` в файл исходного кода, используемый для создания сборки B.dll.

2. Соберите сборку B.dll.

3. Удалите определение типа `MyClass` из исходного кода, используемого для создания сборки A.dll, и замените его следующим кодом:

    ```cpp
    #using "B.dll"
    [assembly:TypeForwardedTo(MyClass::typeid)];
    ```

4. Соберите сборку A.dll.

5. Используйте сборку A.dll без повторной компиляции клиентских приложений.

### <a name="requirements"></a>Требования

Параметр компилятора: `/clr`
