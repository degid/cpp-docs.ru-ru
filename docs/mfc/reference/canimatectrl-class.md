---
title: Класс CAnimateCtrl
ms.date: 11/04/2016
f1_keywords:
- CAnimateCtrl
- AFXCMN/CAnimateCtrl
- AFXCMN/CAnimateCtrl::CAnimateCtrl
- AFXCMN/CAnimateCtrl::Close
- AFXCMN/CAnimateCtrl::Create
- AFXCMN/CAnimateCtrl::CreateEx
- AFXCMN/CAnimateCtrl::IsPlaying
- AFXCMN/CAnimateCtrl::Open
- AFXCMN/CAnimateCtrl::Play
- AFXCMN/CAnimateCtrl::Seek
- AFXCMN/CAnimateCtrl::Stop
helpviewer_keywords:
- CAnimateCtrl [MFC], CAnimateCtrl
- CAnimateCtrl [MFC], Close
- CAnimateCtrl [MFC], Create
- CAnimateCtrl [MFC], CreateEx
- CAnimateCtrl [MFC], IsPlaying
- CAnimateCtrl [MFC], Open
- CAnimateCtrl [MFC], Play
- CAnimateCtrl [MFC], Seek
- CAnimateCtrl [MFC], Stop
ms.assetid: 5e8eb1bd-96b7-47b8-8de2-6bcbb3cc299b
ms.openlocfilehash: 651b5775886374f3fcc95ab6b2cb3d892d9d77e8
ms.sourcegitcommit: 1f009ab0f2cc4a177f2d1353d5a38f164612bdb1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/27/2020
ms.locfileid: "87183387"
---
# <a name="canimatectrl-class"></a>Класс CAnimateCtrl

Предоставляет функциональные возможности стандартного элемента управления анимациями Windows.

## <a name="syntax"></a>Синтаксис

```
class CAnimateCtrl : public CWnd
```

## <a name="members"></a>Участники

### <a name="public-constructors"></a>Открытые конструкторы

|Имя|Описание|
|----------|-----------------|
|[CAnimateCtrl:: CAnimateCtrl](#canimatectrl)|Формирует объект `CAnimateCtrl`.|

### <a name="public-methods"></a>Открытые методы

|Имя|Описание|
|----------|-----------------|
|[CAnimateCtrl:: Close](#close)|Закрывает ролик AVI.|
|[CAnimateCtrl:: Create](#create)|Создает элемент управления анимации и прикрепляет его к `CAnimateCtrl` объекту.|
|[CAnimateCtrl:: Креатикс](#createex)|Создает элемент управления анимации с заданными расширенными стилями Windows и прикрепляет его к `CAnimateCtrl` объекту.|
|[CAnimateCtrl:: воспроизвести](#isplaying)|Указывает, воспроизводится ли музыкальный ролик (AVI).|
|[CAnimateCtrl:: Open](#open)|Открывает ролик AVI из файла или ресурса и отображает первый кадр.|
|[CAnimateCtrl::Pный макет](#play)|Воспроизводит ролик AVI без звука.|
|[CAnimateCtrl:: Seek](#seek)|Отображает выделенный один кадр из AVI-клипа.|
|[CAnimateCtrl:: останавливаться](#stop)|Останавливает воспроизведение клипа AVI.|

## <a name="remarks"></a>Примечания

Этот элемент управления (и, следовательно, `CAnimateCtrl` класс) доступен только для программ, работающих под управлением windows 95, windows 98 и Windows NT версии 3,51 и более поздних версий.

Элемент управления "анимация" — это прямоугольное окно, которое отображает клип в формате AVI (с чередованием аудио-видео) — Стандартный формат видео и аудио Windows. Ролик — это ряд кадров точечного рисунка, например фильм.

Элементы управления "анимация" могут воспроизводить только простые фрагменты AVI. В частности, клипы, воспроизводимые элементом управления анимации, должны соответствовать следующим требованиям.

- Должен быть ровно один поток видео, и он должен иметь по крайней мере один кадр.

- В файле может быть не более двух потоков (обычно другой поток, если он присутствует, является звуковым потоком, хотя элемент управления анимацией не обрабатывает звуковые данные).

- Этот клип должен быть либо распакован, либо сжат с помощью сжатия RLE8.

- В потоке видео не допускаются изменения палитры.

Можно добавить ролик AVI в приложение в виде AVI-ресурса или поместить его в приложение в виде отдельного файла AVI.

Так как поток продолжит выполняться во время отображения AVI-клипа, одним из распространенных способов использования элемента управления анимации является указание активности системы во время длительной операции. Например, диалоговое окно найти в проводнике отображает движущийся увеличительное стекло по мере того, как система осуществляет поиск файла.

При создании `CAnimateCtrl` объекта в диалоговом окне или из диалогового ресурса с помощью редактора диалоговых окон он автоматически уничтожается, когда пользователь закрывает диалоговое окно.

При создании `CAnimateCtrl` объекта в окне может потребоваться его уничтожить. При создании `CAnimateCtrl` объекта в стеке он уничтожается автоматически. При создании `CAnimateCtrl` объекта в куче с помощью **`new`** функции необходимо вызвать **`delete`** для объекта, чтобы уничтожить его. Если создать производный класс от `CAnimateCtrl` и выделить память в этом классе, переопределите `CAnimateCtrl` деструктор для удаления выделений.

Дополнительные сведения об использовании см `CAnimateCtrl` . в разделе [элементы управления](../../mfc/controls-mfc.md) и [Использование CAnimateCtrl](../../mfc/using-canimatectrl.md).

## <a name="inheritance-hierarchy"></a>Иерархия наследования

[CObject](../../mfc/reference/cobject-class.md)

[CCmdTarget](../../mfc/reference/ccmdtarget-class.md)

[CWnd](../../mfc/reference/cwnd-class.md)

`CAnimateCtrl`

## <a name="requirements"></a>Требования

**Заголовок:** afxcmn.h

## <a name="canimatectrlcanimatectrl"></a><a name="canimatectrl"></a>CAnimateCtrl:: CAnimateCtrl

Формирует объект `CAnimateCtrl`.

```
CAnimateCtrl();
```

### <a name="remarks"></a>Примечания

Перед выполнением любых других операций с созданным объектом необходимо вызвать функцию [создания](#create) члена.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCControlLadenDialog#56](../../mfc/codesnippet/cpp/canimatectrl-class_1.cpp)]

## <a name="canimatectrlclose"></a><a name="close"></a>CAnimateCtrl:: Close

Закрывает ролик AVI, который был ранее открыт в элементе управления Animation (при его наличии), и удаляет его из памяти.

```
BOOL Close();
```

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение в случае успеха, иначе — 0.

### <a name="example"></a>Пример

  См. пример для [CAnimateCtrl:: CAnimateCtrl](#canimatectrl).

## <a name="canimatectrlcreate"></a><a name="create"></a>CAnimateCtrl:: Create

Создает элемент управления анимации и прикрепляет его к `CAnimateCtrl` объекту.

```
virtual BOOL Create(
    DWORD dwStyle,
    const RECT& rect,
    CWnd* pParentWnd,
    UINT nID);
```

### <a name="parameters"></a>Параметры

*двстиле*<br/>
Задает стиль элемента управления анимации. Примените любое сочетание стилей Windows, описанное в разделе "Примечания" ниже, и стили элементов управления анимацией, описанные в статье [стили управления анимацией](/windows/win32/Controls/animation-control-styles) в Windows SDK.

*rect*<br/>
Задает расположение и размер элемента управления анимации. Это может быть либо объект [крект](../../atl-mfc-shared/reference/crect-class.md) , либо структура [Rect](/windows/win32/api/windef/ns-windef-rect) .

*ппарентвнд*<br/>
Задает родительское окно элемента управления анимацией, обычно `CDialog` . Оно не должно иметь значение NULL.

*nID*<br/>
Задает идентификатор элемента управления анимацией.

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение в случае успеха, иначе — 0.

### <a name="remarks"></a>Примечания

Построение создается `CAnimateCtrl` в два этапа. Сначала вызовите конструктор, а затем вызовите метод `Create` , который создает элемент управления анимации и присоединяет его к `CAnimateCtrl` объекту.

Применить следующие [стили окна](../../mfc/reference/styles-used-by-mfc.md#window-styles) к элементу управления анимацией.

- WS_CHILD всегда

- WS_VISIBLE обычно

- WS_DISABLED редко

Если вы хотите использовать расширенные стили Windows с элементом управления анимацией, вызовите [креатикс](#createex) вместо `Create` .

Помимо стилей окна, перечисленных выше, может потребоваться применить один или несколько стилей элемента управления анимации к элементу управления анимации. Дополнительные сведения о [стилях элементов управления анимацией](/windows/win32/Controls/animation-control-styles)см. в Windows SDK.

### <a name="example"></a>Пример

  См. пример для [CAnimateCtrl:: CAnimateCtrl](#canimatectrl).

## <a name="canimatectrlcreateex"></a><a name="createex"></a>CAnimateCtrl:: Креатикс

Создает элемент управления (дочернее окно) и связывает его с `CAnimateCtrl` объектом.

```
virtual BOOL CreateEx(
    DWORD dwExStyle,
    DWORD dwStyle,
    const RECT& rect,
    CWnd* pParentWnd,
    UINT nID);
```

### <a name="parameters"></a>Параметры

*двексстиле*<br/>
Задает расширенный стиль создаваемого элемента управления. Список расширенных стилей Windows см. в разделе параметр *двексстиле* для [CreateWindowEx](/windows/win32/api/winuser/nf-winuser-createwindowexw) в Windows SDK.

*двстиле*<br/>
Задает стиль элемента управления анимации. Примените любое сочетание стилей окон и элементов управления анимацией, описанных в разделе [стили элементов управления анимацией](/windows/win32/Controls/animation-control-styles) в Windows SDK.

*rect*<br/>
Ссылка на структуру [Rect](/windows/win32/api/windef/ns-windef-rect) , описывающую размер и расположение создаваемого окна в клиентских координатах *ппарентвнд*.

*ппарентвнд*<br/>
Указатель на окно, которое является родительским элементом управления.

*nID*<br/>
Идентификатор дочернего окна элемента управления.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Примечания

Используйте `CreateEx` вместо [CREATE](#create) , чтобы применить расширенные стили Windows, заданные **WS_EX_** в расширенном стиле Windows.

## <a name="canimatectrlisplaying"></a><a name="isplaying"></a>CAnimateCtrl:: воспроизвести

Указывает, воспроизводится ли музыкальный ролик (AVI).

```
BOOL IsPlaying() const;
```

### <a name="return-value"></a>Возвращаемое значение

Значение TRUE, если воспроизводится ролик AVI; в противном случае — значение FALSE.

### <a name="remarks"></a>Примечания

Этот метод отправляет [ACM_ISPLAYING](/windows/win32/Controls/acm-isplaying) сообщение, описанное в Windows SDK.

## <a name="canimatectrlopen"></a><a name="open"></a>CAnimateCtrl:: Open

Вызовите эту функцию, чтобы открыть ролик AVI и отобразить его первый кадр.

```
BOOL Open(LPCTSTR lpszFileName);
BOOL Open(UINT nID);
```

### <a name="parameters"></a>Параметры

*лпсзфиленаме*<br/>
`CString`Объект или указатель на строку, завершающуюся нулем, которая содержит либо имя AVI-файла, либо имя ресурса AVI. Если этот параметр имеет значение NULL, система закрывает ролик AVI, который был ранее открыт для элемента управления "анимация" (при его наличии).

*nID*<br/>
Идентификатор ресурса AVI. Если этот параметр имеет значение NULL, система закрывает ролик AVI, который был ранее открыт для элемента управления "анимация" (при его наличии).

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение в случае успеха, иначе — 0.

### <a name="remarks"></a>Примечания

Ресурс AVI загружается из модуля, который создал элемент управления Animation.

`Open`не поддерживает звук в ролике AVI; можно открывать только автоматические клипы AVI.

Если элемент управления "анимация" имеет `ACS_AUTOPLAY` стиль, элемент управления "анимация" автоматически начнет воспроизведение клипа сразу после его открытия. Он будет продолжать воспроизводить клип в фоновом режиме, пока поток продолжает выполняться. После завершения воспроизведения клип будет автоматически повторяться.

Если элемент управления анимации имеет `ACS_CENTER` стиль, то ролик AVI будет центрирован в элементе управления, а размер элемента управления не изменится. Если элемент управления "анимация" не имеет `ACS_CENTER` стиля, размер элемента управления будет изменен при открытии клипа AVI на размер изображений в ролике AVI. Расположение верхнего левого угла элемента управления не изменится, а только размер элемента управления.

Если элемент управления анимации имеет `ACS_TRANSPARENT` стиль, первый кадр будет отображаться с использованием прозрачного фона, а не цвета фона, заданного в анимированном фрагменте.

### <a name="example"></a>Пример

  См. пример для [CAnimateCtrl:: CAnimateCtrl](#canimatectrl).

## <a name="canimatectrlplay"></a><a name="play"></a>CAnimateCtrl::Pный макет

Вызывайте эту функцию для воспроизведения клипа AVI в элементе управления анимации.

```
BOOL Play(
    UINT nFrom,
    UINT nTo,
    UINT nRep);
```

### <a name="parameters"></a>Параметры

*Nиз*<br/>
Отсчитываемый от нуля индекс кадра, с которого начинается воспроизведение. Значение должно быть меньше 65 536. Значение 0 означает, что начинается с первого кадра в ролике AVI.

*nЧтобы*<br/>
Отсчитываемый от нуля индекс кадра, в котором завершается воспроизведение. Значение должно быть меньше 65 536. Значение-1 означает, что заканчивается последним кадром в ролике AVI.

*нреп*<br/>
Количество повторов воспроизведения клипа AVI. Значение-1 означает, что файл воспроизводится неограниченное время.

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение в случае успеха, иначе — 0.

### <a name="remarks"></a>Примечания

Элемент управления "анимация" будет воспроизводить клип в фоновом режиме, пока поток продолжит выполнение. Если элемент управления "анимация" имеет `ACS_TRANSPARENT` стиль, ролик AVI будет воспроизводиться с использованием прозрачного фона, а не цвета фона, заданного в анимированном фрагменте.

### <a name="example"></a>Пример

  См. пример для [CAnimateCtrl:: CAnimateCtrl](#canimatectrl).

## <a name="canimatectrlseek"></a><a name="seek"></a>CAnimateCtrl:: Seek

Вызовите эту функцию, чтобы статически отображать один кадр фрагмента AVI.

```
BOOL Seek(UINT nTo);
```

### <a name="parameters"></a>Параметры

*nЧтобы*<br/>
Отсчитываемый от нуля индекс отображаемого кадра. Значение должно быть меньше 65 536. Значение 0 означает, что первый кадр отображается в ролике AVI. Значение-1 означает отображение последнего кадра в ролике AVI.

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение в случае успеха, иначе — 0.

### <a name="remarks"></a>Примечания

Если элемент управления "анимация" имеет `ACS_TRANSPARENT` стиль, ролик AVI будет отображаться с использованием прозрачного фона, а не цвета фона, заданного в анимированном фрагменте.

### <a name="example"></a>Пример

См. пример для [CAnimateCtrl:: CAnimateCtrl](#canimatectrl).

## <a name="canimatectrlstop"></a><a name="stop"></a>CAnimateCtrl:: останавливаться

Вызовите эту функцию, чтобы не воспроизводить ролик AVI в элементе управления анимации.

```
BOOL Stop();
```

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение в случае успеха, иначе — 0.

### <a name="example"></a>Пример

  См. пример для [CAnimateCtrl:: CAnimateCtrl](#canimatectrl).

## <a name="see-also"></a>См. также раздел

[CWnd, класс](../../mfc/reference/cwnd-class.md)<br/>
[Иерархическая диаграмма](../../mfc/hierarchy-chart.md)<br/>
[CAnimateCtrl:: Create](#create)<br/>
[ON_CONTROL](message-map-macros-mfc.md#on_control)
