---
title: CTreeCtrl Class
ms.date: 11/04/2016
f1_keywords:
- CTreeCtrl
- AFXCMN/CTreeCtrl
- AFXCMN/CTreeCtrl::CTreeCtrl
- AFXCMN/CTreeCtrl::Create
- AFXCMN/CTreeCtrl::CreateDragImage
- AFXCMN/CTreeCtrl::CreateEx
- AFXCMN/CTreeCtrl::DeleteAllItems
- AFXCMN/CTreeCtrl::DeleteItem
- AFXCMN/CTreeCtrl::EditLabel
- AFXCMN/CTreeCtrl::EndEditLabelNow
- AFXCMN/CTreeCtrl::EnsureVisible
- AFXCMN/CTreeCtrl::Expand
- AFXCMN/CTreeCtrl::GetBkColor
- AFXCMN/CTreeCtrl::GetCheck
- AFXCMN/CTreeCtrl::GetChildItem
- AFXCMN/CTreeCtrl::GetCount
- AFXCMN/CTreeCtrl::GetDropHilightItem
- AFXCMN/CTreeCtrl::GetEditControl
- AFXCMN/CTreeCtrl::GetExtendedStyle
- AFXCMN/CTreeCtrl::GetFirstVisibleItem
- AFXCMN/CTreeCtrl::GetImageList
- AFXCMN/CTreeCtrl::GetIndent
- AFXCMN/CTreeCtrl::GetInsertMarkColor
- AFXCMN/CTreeCtrl::GetItem
- AFXCMN/CTreeCtrl::GetItemData
- AFXCMN/CTreeCtrl::GetItemExpandedImageIndex
- AFXCMN/CTreeCtrl::GetItemHeight
- AFXCMN/CTreeCtrl::GetItemImage
- AFXCMN/CTreeCtrl::GetItemPartRect
- AFXCMN/CTreeCtrl::GetItemRect
- AFXCMN/CTreeCtrl::GetItemState
- AFXCMN/CTreeCtrl::GetItemStateEx
- AFXCMN/CTreeCtrl::GetItemText
- AFXCMN/CTreeCtrl::GetLastVisibleItem
- AFXCMN/CTreeCtrl::GetLineColor
- AFXCMN/CTreeCtrl::GetNextItem
- AFXCMN/CTreeCtrl::GetNextSiblingItem
- AFXCMN/CTreeCtrl::GetNextVisibleItem
- AFXCMN/CTreeCtrl::GetParentItem
- AFXCMN/CTreeCtrl::GetPrevSiblingItem
- AFXCMN/CTreeCtrl::GetPrevVisibleItem
- AFXCMN/CTreeCtrl::GetRootItem
- AFXCMN/CTreeCtrl::GetScrollTime
- AFXCMN/CTreeCtrl::GetSelectedCount
- AFXCMN/CTreeCtrl::GetSelectedItem
- AFXCMN/CTreeCtrl::GetTextColor
- AFXCMN/CTreeCtrl::GetToolTips
- AFXCMN/CTreeCtrl::GetVisibleCount
- AFXCMN/CTreeCtrl::HitTest
- AFXCMN/CTreeCtrl::InsertItem
- AFXCMN/CTreeCtrl::ItemHasChildren
- AFXCMN/CTreeCtrl::MapAccIdToItem
- AFXCMN/CTreeCtrl::MapItemToAccID
- AFXCMN/CTreeCtrl::Select
- AFXCMN/CTreeCtrl::SelectDropTarget
- AFXCMN/CTreeCtrl::SelectItem
- AFXCMN/CTreeCtrl::SelectSetFirstVisible
- AFXCMN/CTreeCtrl::SetAutoscrollInfo
- AFXCMN/CTreeCtrl::SetBkColor
- AFXCMN/CTreeCtrl::SetCheck
- AFXCMN/CTreeCtrl::SetExtendedStyle
- AFXCMN/CTreeCtrl::SetImageList
- AFXCMN/CTreeCtrl::SetIndent
- AFXCMN/CTreeCtrl::SetInsertMark
- AFXCMN/CTreeCtrl::SetInsertMarkColor
- AFXCMN/CTreeCtrl::SetItem
- AFXCMN/CTreeCtrl::SetItemData
- AFXCMN/CTreeCtrl::SetItemExpandedImageIndex
- AFXCMN/CTreeCtrl::SetItemHeight
- AFXCMN/CTreeCtrl::SetItemImage
- AFXCMN/CTreeCtrl::SetItemState
- AFXCMN/CTreeCtrl::SetItemStateEx
- AFXCMN/CTreeCtrl::SetItemText
- AFXCMN/CTreeCtrl::SetLineColor
- AFXCMN/CTreeCtrl::SetScrollTime
- AFXCMN/CTreeCtrl::SetTextColor
- AFXCMN/CTreeCtrl::SetToolTips
- AFXCMN/CTreeCtrl::ShowInfoTip
- AFXCMN/CTreeCtrl::SortChildren
- AFXCMN/CTreeCtrl::SortChildrenCB
helpviewer_keywords:
- CTreeCtrl [MFC], CTreeCtrl
- CTreeCtrl [MFC], Create
- CTreeCtrl [MFC], CreateDragImage
- CTreeCtrl [MFC], CreateEx
- CTreeCtrl [MFC], DeleteAllItems
- CTreeCtrl [MFC], DeleteItem
- CTreeCtrl [MFC], EditLabel
- CTreeCtrl [MFC], EndEditLabelNow
- CTreeCtrl [MFC], EnsureVisible
- CTreeCtrl [MFC], Expand
- CTreeCtrl [MFC], GetBkColor
- CTreeCtrl [MFC], GetCheck
- CTreeCtrl [MFC], GetChildItem
- CTreeCtrl [MFC], GetCount
- CTreeCtrl [MFC], GetDropHilightItem
- CTreeCtrl [MFC], GetEditControl
- CTreeCtrl [MFC], GetExtendedStyle
- CTreeCtrl [MFC], GetFirstVisibleItem
- CTreeCtrl [MFC], GetImageList
- CTreeCtrl [MFC], GetIndent
- CTreeCtrl [MFC], GetInsertMarkColor
- CTreeCtrl [MFC], GetItem
- CTreeCtrl [MFC], GetItemData
- CTreeCtrl [MFC], GetItemExpandedImageIndex
- CTreeCtrl [MFC], GetItemHeight
- CTreeCtrl [MFC], GetItemImage
- CTreeCtrl [MFC], GetItemPartRect
- CTreeCtrl [MFC], GetItemRect
- CTreeCtrl [MFC], GetItemState
- CTreeCtrl [MFC], GetItemStateEx
- CTreeCtrl [MFC], GetItemText
- CTreeCtrl [MFC], GetLastVisibleItem
- CTreeCtrl [MFC], GetLineColor
- CTreeCtrl [MFC], GetNextItem
- CTreeCtrl [MFC], GetNextSiblingItem
- CTreeCtrl [MFC], GetNextVisibleItem
- CTreeCtrl [MFC], GetParentItem
- CTreeCtrl [MFC], GetPrevSiblingItem
- CTreeCtrl [MFC], GetPrevVisibleItem
- CTreeCtrl [MFC], GetRootItem
- CTreeCtrl [MFC], GetScrollTime
- CTreeCtrl [MFC], GetSelectedCount
- CTreeCtrl [MFC], GetSelectedItem
- CTreeCtrl [MFC], GetTextColor
- CTreeCtrl [MFC], GetToolTips
- CTreeCtrl [MFC], GetVisibleCount
- CTreeCtrl [MFC], HitTest
- CTreeCtrl [MFC], InsertItem
- CTreeCtrl [MFC], ItemHasChildren
- CTreeCtrl [MFC], MapAccIdToItem
- CTreeCtrl [MFC], MapItemToAccID
- CTreeCtrl [MFC], Select
- CTreeCtrl [MFC], SelectDropTarget
- CTreeCtrl [MFC], SelectItem
- CTreeCtrl [MFC], SelectSetFirstVisible
- CTreeCtrl [MFC], SetAutoscrollInfo
- CTreeCtrl [MFC], SetBkColor
- CTreeCtrl [MFC], SetCheck
- CTreeCtrl [MFC], SetExtendedStyle
- CTreeCtrl [MFC], SetImageList
- CTreeCtrl [MFC], SetIndent
- CTreeCtrl [MFC], SetInsertMark
- CTreeCtrl [MFC], SetInsertMarkColor
- CTreeCtrl [MFC], SetItem
- CTreeCtrl [MFC], SetItemData
- CTreeCtrl [MFC], SetItemExpandedImageIndex
- CTreeCtrl [MFC], SetItemHeight
- CTreeCtrl [MFC], SetItemImage
- CTreeCtrl [MFC], SetItemState
- CTreeCtrl [MFC], SetItemStateEx
- CTreeCtrl [MFC], SetItemText
- CTreeCtrl [MFC], SetLineColor
- CTreeCtrl [MFC], SetScrollTime
- CTreeCtrl [MFC], SetTextColor
- CTreeCtrl [MFC], SetToolTips
- CTreeCtrl [MFC], ShowInfoTip
- CTreeCtrl [MFC], SortChildren
- CTreeCtrl [MFC], SortChildrenCB
ms.assetid: 96e20031-6161-4143-8c12-8d1816c66d90
ms.openlocfilehash: 6a824aceae39d5aa6685176354c48a9457a40e9e
ms.sourcegitcommit: ec6dd97ef3d10b44e0fedaa8e53f41696f49ac7b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/25/2020
ms.locfileid: "88837623"
---
# <a name="ctreectrl-class"></a>CTreeCtrl Class

Предоставляет функциональные возможности стандартного элемента управления "представление в виде дерева" Windows.

## <a name="syntax"></a>Синтаксис

```
class CTreeCtrl : public CWnd
```

## <a name="members"></a>Участники

### <a name="public-constructors"></a>Открытые конструкторы

|Имя|Описание|
|----------|-----------------|
|[CTreeCtrl:: CTreeCtrl](#ctreectrl)|Формирует объект `CTreeCtrl`.|

### <a name="public-methods"></a>Открытые методы

|Имя|Описание|
|----------|-----------------|
|[CTreeCtrl:: Create](#create)|Создает элемент управления иерархического представления и присоединяет его к `CTreeCtrl` объекту.|
|[CTreeCtrl:: Креатедрагимаже](#createdragimage)|Создает перетаскивание растрового изображения для указанного элемента представления в виде дерева.|
|[CTreeCtrl:: Креатикс](#createex)|Создает элемент управления "дерево" с указанными расширенными стилями Windows и прикрепляет его к `CTreeCtrl` объекту.|
|[CTreeCtrl::D Елетеаллитемс](#deleteallitems)|Удаляет все элементы в элементе управления иерархического представления.|
|[CTreeCtrl::D Елетеитем](#deleteitem)|Удаляет новый элемент в элементе управления иерархического представления.|
|[CTreeCtrl:: Едитлабел](#editlabel)|Изменяет указанный элемент древовидного представления на месте.|
|[CTreeCtrl:: Ендедитлабелнов](#endeditlabelnow)|Отменяет операцию изменения для метки элемента представления дерева в текущем элементе управления "дерево-представление".|
|[CTreeCtrl:: Енсуревисибле](#ensurevisible)|Гарантирует, что элемент представления в виде дерева будет виден в элементе управления иерархического представления.|
|[CTreeCtrl:: Expand](#expand)|Развертывает или сворачивает дочерние элементы указанного элемента представления в виде дерева.|
|[CTreeCtrl:: Жетбкколор](#getbkcolor)|Возвращает текущий цвет фона элемента управления.|
|[CTreeCtrl:: Check](#getcheck)|Возвращает состояние проверки элемента управления "дерево".|
|[CTreeCtrl:: Жетчилдитем](#getchilditem)|Возвращает дочерний элемент указанного элемента представления в виде дерева.|
|[CTreeCtrl:: NOCOUNT](#getcount)|Возвращает число элементов дерева, связанных с элементом управления иерархического представления.|
|[CTreeCtrl:: Жетдрофилигхтитем](#getdrophilightitem)|Извлекает целевой объект операции перетаскивания.|
|[CTreeCtrl:: Жетедитконтрол](#geteditcontrol)|Получает маркер элемента управления "поле ввода", используемый для изменения указанного элемента представления в виде дерева.|
|[CTreeCtrl:: Жетекстендедстиле](#getextendedstyle)|Извлекает расширенные стили, которые использует текущий элемент управления "дерево-представление".|
|[CTreeCtrl:: Жетфирствисиблеитем](#getfirstvisibleitem)|Извлекает первый видимый элемент указанного элемента представления дерева.|
|[CTreeCtrl::/ImageList](#getimagelist)|Извлекает маркер списка изображений, связанный с элементом управления иерархического представления.|
|[CTreeCtrl:: Indent](#getindent)|Получает смещение (в пикселях) элемента представления в виде дерева от его родителя.|
|[CTreeCtrl:: Жетинсертмаркколор](#getinsertmarkcolor)|Извлекает цвет, используемый для рисования метки вставки в представлении в виде дерева.|
|[CTreeCtrl:: DataItem](#getitem)|Извлекает атрибуты указанного элемента представления в виде дерева.|
|[CTreeCtrl:: Жетитемдата](#getitemdata)|Возвращает зависящее от приложения значение, связанное с элементом.|
|[CTreeCtrl:: Жетитемекспандедимажеиндекс](#getitemexpandedimageindex)|Получает индекс изображения, отображаемого, когда указанный элемент текущего элемента управления "дерево" находится в развернутом состоянии.|
|[CTreeCtrl:: GetItemHeight](#getitemheight)|Возвращает текущую высоту элементов представления в виде дерева.|
|[CTreeCtrl:: GetItemImage](#getitemimage)|Извлекает изображения, связанные с элементом.|
|[CTreeCtrl:: Жетитемпартрект](#getitempartrect)|Извлекает ограничивающий прямоугольник для заданной части указанного элемента в текущем элементе управления "дерево-представление".|
|[CTreeCtrl:: Жетитемрект](#getitemrect)|Извлекает ограничивающий прямоугольник элемента представления в виде дерева.|
|[CTreeCtrl:: Жетитемстате](#getitemstate)|Возвращает состояние элемента.|
|[CTreeCtrl:: Жетитемстатикс](#getitemstateex)|Получает Расширенное состояние указанного элемента в текущем элементе управления "дерево-представление".|
|[CTreeCtrl:: Жетитемтекст](#getitemtext)|Возвращает текст элемента.|
|[CTreeCtrl:: Жетластвисиблеитем](#getlastvisibleitem)|Извлекает последний развернутый элемент в текущем элементе управления "дерево-представление".|
|[CTreeCtrl:: Жетлинеколор](#getlinecolor)|Получает текущий цвет линии для элемента управления иерархического представления.|
|[CTreeCtrl:: Жетнекститем](#getnextitem)|Извлекает следующий элемент древовидного представления, соответствующий указанной связи.|
|[CTreeCtrl:: Жетнекстсиблингитем](#getnextsiblingitem)|Извлекает следующий элемент того же уровня для указанного элемента представления в виде дерева.|
|[CTreeCtrl:: Жетнекствисиблеитем](#getnextvisibleitem)|Извлекает следующий видимый элемент указанного элемента представления дерева.|
|[CTreeCtrl:: Жетпарентитем](#getparentitem)|Возвращает родительский элемент указанного элемента представления в виде дерева.|
|[CTreeCtrl:: Жетпревсиблингитем](#getprevsiblingitem)|Извлекает предыдущий элемент того же уровня для указанного элемента представления в виде дерева.|
|[CTreeCtrl:: Жетпреввисиблеитем](#getprevvisibleitem)|Извлекает предыдущий видимый элемент указанного элемента представления дерева.|
|[CTreeCtrl:: Жетрутитем](#getrootitem)|Возвращает корень указанного элемента представления в виде дерева.|
|[CTreeCtrl:: Жетскроллтиме](#getscrolltime)|Возвращает максимальное время прокрутки для элемента управления иерархического представления.|
|[CTreeCtrl:: Жетселектедкаунт](#getselectedcount)|Извлекает число выбранных элементов в текущем элементе управления "дерево-представление".|
|[CTreeCtrl:: Жетселектедитем](#getselecteditem)|Извлекает выбранный в данный момент элемент представления в виде дерева.|
|[CTreeCtrl:: Жеттекстколор](#gettextcolor)|Извлекает текущий цвет текста элемента управления.|
|[CTreeCtrl:: подсказки](#gettooltips)|Получает маркер для дочернего элемента управления ToolTip, используемого элементом управления иерархического представления.|
|[CTreeCtrl:: Жетвисиблекаунт](#getvisiblecount)|Возвращает число видимых элементов дерева, связанных с элементом управления иерархического представления.|
|[CTreeCtrl:: HitTest](#hittest)|Возвращает текущую позицию курсора, связанного с `CTreeCtrl` объектом.|
|[CTreeCtrl:: InsertItem](#insertitem)|Вставляет новый элемент в элемент управления иерархического представления.|
|[CTreeCtrl:: Итемхасчилдрен](#itemhaschildren)|Возвращает ненулевое значение, если указанный элемент имеет дочерние элементы.|
|[CTreeCtrl:: МапакЦидтоитем](#mapaccidtoitem)|Сопоставляет указанный идентификатор доступа с маркером с элементом представления дерева в текущем элементе управления "дерево-представление".|
|[CTreeCtrl:: МапитемтоакЦид](#mapitemtoaccid)|Сопоставляет указанный маркер с элементом представления дерева в текущем элементе управления "дерево-представление" с идентификатором доступа.|
|[CTreeCtrl:: SELECT](#select)|Выбирает, прокручивает в представлении или перерисовывает указанный элемент древовидного представления.|
|[CTreeCtrl:: Селектдроптаржет](#selectdroptarget)|Перерисовывает элемент дерева в качестве цели операции перетаскивания.|
|[CTreeCtrl:: Селектитем](#selectitem)|Выбирает указанный элемент представления в виде дерева.|
|[CTreeCtrl:: Селектсетфирствисибле](#selectsetfirstvisible)|Выбирает указанный элемент представления в виде дерева в качестве первого видимого элемента.|
|[CTreeCtrl:: Сетаутоскроллинфо](#setautoscrollinfo)|Задает частоту прокрутки текущего элемента управления "дерево-представление".|
|[CTreeCtrl:: Сетбкколор](#setbkcolor)|Задает цвет фона элемента управления.|
|[CTreeCtrl:: Сетчекк](#setcheck)|Задает состояние проверки элемента управления "дерево".|
|[CTreeCtrl:: Сетекстендедстиле](#setextendedstyle)|Задает расширенные стили для текущего элемента управления "дерево-представление".|
|[CTreeCtrl:: Сетимажелист](#setimagelist)|Задает маркер списка изображений, связанный с элементом управления иерархического представления.|
|[CTreeCtrl:: Сетиндент](#setindent)|Задает смещение (в пикселях) элемента представления в виде дерева от его родителя.|
|[CTreeCtrl:: Сетинсертмарк](#setinsertmark)|Задает метку вставки в элементе управления иерархического представления.|
|[CTreeCtrl:: Сетинсертмаркколор](#setinsertmarkcolor)|Задает цвет, используемый для отображения метки вставки для представления в виде дерева.|
|[CTreeCtrl:: Сетитем](#setitem)|Задает атрибуты указанного элемента древовидного представления.|
|[CTreeCtrl:: Сетитемдата](#setitemdata)|Задает зависящее от приложения значение, связанное с элементом.|
|[CTreeCtrl:: Сетитемекспандедимажеиндекс](#setitemexpandedimageindex)|Задает индекс изображения, отображаемого, когда указанный элемент текущего элемента управления "представление дерева" находится в развернутом состоянии.|
|[CTreeCtrl:: Сетитемхеигхт](#setitemheight)|Задает высоту элементов представления в виде дерева.|
|[CTreeCtrl:: Сетитемимаже](#setitemimage)|Связывает изображения с элементом.|
|[CTreeCtrl:: Сетитемстате](#setitemstate)|Задает состояние элемента.|
|[CTreeCtrl:: Сетитемстатикс](#setitemstateex)|Задает расширенное состояние указанного элемента в текущем элементе управления "дерево-представление".|
|[CTreeCtrl:: Сетитемтекст](#setitemtext)|Задает текст элемента.|
|[CTreeCtrl:: Сетлинеколор](#setlinecolor)|Задает цвет текущей линии для элемента управления иерархического представления.|
|[CTreeCtrl:: Сетскроллтиме](#setscrolltime)|Задает максимальное время прокрутки для элемента управления иерархического представления.|
|[CTreeCtrl:: Сеттекстколор](#settextcolor)|Задает цвет текста элемента управления.|
|[CTreeCtrl:: Сеттултипс](#settooltips)|Задает дочерний элемент управления всплывающей подсказкой в древовидном представлении.|
|[CTreeCtrl:: Шовинфотип](#showinfotip)|Отображает всплывающую подсказку для указанного элемента в текущем элементе управления "дерево-представление".|
|[CTreeCtrl:: Сортчилдрен](#sortchildren)|Сортирует дочерние элементы заданного родительского элемента.|
|[CTreeCtrl:: Сортчилдренкб](#sortchildrencb)|Сортирует дочерние элементы заданного родительского элемента с помощью определяемой приложением функции сортировки.|

## <a name="remarks"></a>Примечания

Элемент управления иерархического представления — это окно, в котором отображается иерархический список элементов, например заголовки в документе, записи в индексе или файлы и каталоги на диске. Каждый элемент состоит из метки и необязательного изображения точечного рисунка, и каждый элемент может иметь список связанных с ним подэлементов. Щелкнув элемент, пользователь может развернуть и свернуть связанный список подэлементов.

Этот элемент управления (и, следовательно, `CTreeCtrl` класс) доступен только для программ, работающих под управлением windows 98 и Windows NT версии 4 и более поздних версий.

Дополнительные сведения об использовании см `CTreeCtrl` . в следующих статьях:

- [Элементы управления](../../mfc/controls-mfc.md)

- [Использование CTreeCtrl](../../mfc/using-ctreectrl.md)

- [Ссылка на элемент управления иерархического представления](/windows/win32/Controls/tree-view-control-reference) в Windows SDK.

## <a name="inheritance-hierarchy"></a>Иерархия наследования

[CObject](../../mfc/reference/cobject-class.md)

[CCmdTarget](../../mfc/reference/ccmdtarget-class.md)

[CWnd](../../mfc/reference/cwnd-class.md)

`CTreeCtrl`

## <a name="requirements"></a>Требования

**Заголовок:** afxcmn.h

## <a name="ctreectrlcreate"></a><a name="create"></a> CTreeCtrl:: Create

При указании элемента управления "дерево" в шаблоне диалогового окна или при использовании [CTreeView](../../mfc/reference/ctreeview-class.md)элемент управления "дерево" создается автоматически при создании диалогового окна или представления.

```
virtual BOOL Create(
    DWORD dwStyle,
    const RECT& rect,
    CWnd* pParentWnd,
    UINT nID);
```

### <a name="parameters"></a>Параметры

*двстиле*<br/>
Задает стиль элемента управления иерархического представления. Примените стили окон, описанные в [CreateWindow](/windows/win32/api/winuser/nf-winuser-createwindoww), и любое сочетание [стилей элементов управления древовидного представления](/windows/win32/Controls/tree-view-control-window-styles) , как описано в Windows SDK.

*rect*<br/>
Задает размер и расположение элемента управления иерархического представления. Это может быть либо объект [крект](../../atl-mfc-shared/reference/crect-class.md) , либо структура [Rect](/windows/win32/api/windef/ns-windef-rect) .

*ппарентвнд*<br/>
Задает родительское окно элемента управления иерархического представления, обычно `CDialog` . Оно не должно иметь значение NULL.

*nID*<br/>
Задает идентификатор элемента управления иерархического представления.

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение, если инициализация прошла успешно; в противном случае — 0.

### <a name="remarks"></a>Примечания

Если необходимо создать элемент управления "дерево" в качестве дочернего окна другого окна, используйте `Create` функцию-член. Если элемент управления "дерево" создается с помощью `Create` , его необходимо передать WS_VISIBLE в дополнение к другим стилям представления дерева.

Построение создается `CTreeCtrl` в два этапа. Сначала вызовите конструктор, а затем вызов `Create` , который создает элемент управления иерархического представления и присоединяет его к `CTreeCtrl` объекту.

Чтобы создать элемент управления "дерево" с расширенными стилями окна, вызовите [креатикс](#createex) вместо `Create` .

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#1](../../mfc/reference/codesnippet/cpp/ctreectrl-class_1.cpp)]

## <a name="ctreectrlcreateex"></a><a name="createex"></a> CTreeCtrl:: Креатикс

Вызовите эту функцию, чтобы создать элемент управления (дочернее окно) и связать его с `CTreeCtrl` объектом.

```
virtual BOOL CreateEx(
    DWORD dwExStyle,
    DWORD dwStyle,
    const RECT& rect,
    CWnd* pParentWnd,
    UINT nID);
```

### <a name="parameters"></a>Параметры

*двексстиле*<br/>
Задает расширенный стиль создаваемого элемента управления. Список расширенных стилей Windows см. в разделе параметр *двексстиле* для [CreateWindowEx](/windows/win32/api/winuser/nf-winuser-createwindowexw) в Windows SDK.

*двстиле*<br/>
Задает стиль элемента управления иерархического представления. Примените стили окон, описанные в [CreateWindow](/windows/win32/api/winuser/nf-winuser-createwindoww), и любое сочетание [стилей элементов управления древовидного представления](/windows/win32/Controls/tree-view-control-window-styles) , как описано в Windows SDK.

*rect*<br/>
Ссылка на структуру [Rect](/windows/win32/api/windef/ns-windef-rect) , описывающую размер и расположение создаваемого окна в клиентских координатах *ппарентвнд*.

*ппарентвнд*<br/>
Указатель на окно, которое является родительским элементом управления.

*nID*<br/>
Идентификатор дочернего окна элемента управления.

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение, если успешное выполнение равно 0.

### <a name="remarks"></a>Примечания

Используйте `CreateEx` вместо [CREATE](#create) , чтобы применить расширенные стили Windows, заданные **WS_EX_** в расширенном стиле Windows.

## <a name="ctreectrlcreatedragimage"></a><a name="createdragimage"></a> CTreeCtrl:: Креатедрагимаже

Эта функция вызывается для создания перетаскивания растрового изображения для заданного элемента в элементе управления "дерево", создания списка изображений для точечного рисунка и добавления растрового изображения в список изображений.

```
CImageList* CreateDragImage(HTREEITEM hItem);
```

### <a name="parameters"></a>Параметры

*хитем*<br/>
Маркер элемента дерева для перетаскивания.

### <a name="return-value"></a>Возвращаемое значение

Указатель на список изображений, в который был добавлен растровый рисунок, если он был успешным; в противном случае — NULL.

### <a name="remarks"></a>Примечания

Приложение использует функции-списки изображений для вывода изображения при перетаскивании элемента.

`CImageList`Объект является постоянным и его необходимо удалить по завершении. Пример:

[!code-cpp[NVC_MFC_CTreeCtrl#2](../../mfc/reference/codesnippet/cpp/ctreectrl-class_2.cpp)]

## <a name="ctreectrlctreectrl"></a><a name="ctreectrl"></a> CTreeCtrl:: CTreeCtrl

Формирует объект `CTreeCtrl`.

```
CTreeCtrl();
```

## <a name="ctreectrldeleteallitems"></a><a name="deleteallitems"></a> CTreeCtrl::D Елетеаллитемс

Вызовите эту функцию, чтобы удалить все элементы из элемента управления представлением в виде дерева.

```
BOOL DeleteAllItems();
```

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#3](../../mfc/reference/codesnippet/cpp/ctreectrl-class_3.cpp)]

## <a name="ctreectrldeleteitem"></a><a name="deleteitem"></a> CTreeCtrl::D Елетеитем

Вызовите эту функцию, чтобы удалить элемент из элемента управления иерархического представления.

```
BOOL DeleteItem(HTREEITEM hItem);
```

### <a name="parameters"></a>Параметры

*хитем*<br/>
Обрабатываемый элемент дерева. Если *хитем* имеет значение TVI_ROOT, все элементы удаляются из элемента управления иерархического представления.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#4](../../mfc/reference/codesnippet/cpp/ctreectrl-class_4.cpp)]

## <a name="ctreectrleditlabel"></a><a name="editlabel"></a> CTreeCtrl:: Едитлабел

Вызовите эту функцию, чтобы начать редактирование текста указанного элемента на месте.

```
CEdit* EditLabel(HTREEITEM hItem);
```

### <a name="parameters"></a>Параметры

*хитем*<br/>
Обрабатываемый элемент дерева.

### <a name="return-value"></a>Возвращаемое значение

В случае успеха указатель на `CEdit` объект, используемый для изменения текста элемента; в противном случае — null.

### <a name="remarks"></a>Примечания

Редактирование достигается путем замены текста элемента на однострочный элемент управления Edit, содержащий текст.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#5](../../mfc/reference/codesnippet/cpp/ctreectrl-class_5.cpp)]

## <a name="ctreectrlendeditlabelnow"></a><a name="endeditlabelnow"></a> CTreeCtrl:: Ендедитлабелнов

Завершает операцию редактирования для метки элемента представления дерева в текущем элементе управления "дерево-представление".

```
BOOL EndEditLabelNow(BOOL fCancelWithoutSave);
```

### <a name="parameters"></a>Параметры

*фканцелвисаутсаве*\
окне Значение TRUE, чтобы отменить изменения в элементе представления дерева перед завершением операции изменения или FALSE, чтобы сохранить изменения в элементе представления дерева перед завершением операции.

### <a name="return-value"></a>Возвращаемое значение

Значение TRUE, если этот метод успешно выполнен; в противном случае — значение FALSE.

### <a name="remarks"></a>Примечания

Этот метод отправляет [TVM_ENDEDITLABELNOW](/windows/win32/Controls/tvm-endeditlabelnow) сообщение, описанное в Windows SDK.

## <a name="ctreectrlensurevisible"></a><a name="ensurevisible"></a> CTreeCtrl:: Енсуревисибле

Вызовите эту функцию, чтобы убедиться, что элемент древовидного представления является видимым.

```
BOOL EnsureVisible(HTREEITEM hItem);
```

### <a name="parameters"></a>Параметры

*хитем*<br/>
Обрабатываемый элемент дерева.

### <a name="return-value"></a>Возвращаемое значение

Возвращает значение TRUE, если система прокручивает элементы в элементе управления "дерево", чтобы убедиться, что указанный элемент является видимым. В противном случае возвращается значение FALSE.

### <a name="remarks"></a>Примечания

При необходимости функция расширяет родительский элемент или прокручивает элемент управления иерархического представления, чтобы элемент был видимым.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#6](../../mfc/reference/codesnippet/cpp/ctreectrl-class_6.cpp)]

## <a name="ctreectrlexpand"></a><a name="expand"></a> CTreeCtrl:: Expand

Вызовите эту функцию, чтобы развернуть или свернуть список дочерних элементов (если таковые имеются), связанных с данным родительским элементом.

```
BOOL Expand(
    HTREEITEM hItem,
    UINT nCode);
```

### <a name="parameters"></a>Параметры

*хитем*<br/>
Обрабатывающий развернутый элемент дерева.

*нкоде*<br/>
Флаг, указывающий тип выполняемого действия. Этот флаг может иметь одно из следующих значений:

- TVE_COLLAPSE сворачивает список.

- TVE_COLLAPSERESET сворачивает список и удаляет дочерние элементы. Флаг состояния TVIS_EXPANDEDONCE сброшен. Этот флаг следует использовать с флагом TVE_COLLAPSE.

- TVE_EXPAND раскрывает список.

- TVE_TOGGLE сворачивает список, если он в данный момент развернут или разворачивается, если он в данный момент свернут.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="example"></a>Пример

  См. пример для [CTreeCtrl:: енсуревисибле](#ensurevisible).

## <a name="ctreectrlgetbkcolor"></a><a name="getbkcolor"></a> CTreeCtrl:: Жетбкколор

Эта функция члена реализует поведение сообщения Win32 [TVM_GETBKCOLOR](/windows/win32/Controls/tvm-getbkcolor), как описано в Windows SDK.

```
COLORREF GetBkColor() const;
```

### <a name="return-value"></a>Возвращаемое значение

Значение COLORREF, представляющее цвет фона текущего окна для элемента управления. Если это значение равно-1, то элемент управления использует цвет системного окна. В этом случае можно использовать `::GetSysColor(COLOR_WINDOW)` для получения текущего системного цвета, используемого элементом управления.

### <a name="example"></a>Пример

  См. пример для [CTreeCtrl:: сеттекстколор](#settextcolor).

## <a name="ctreectrlgetcheck"></a><a name="getcheck"></a> CTreeCtrl:: Check

Вызовите эту функцию члена, чтобы получить состояние проверки элемента.

```
BOOL GetCheck(HTREEITEM hItem) const;
```

### <a name="parameters"></a>Параметры

*хитем*<br/>
ХТРИИТЕМ, для которой необходимо получить сведения о состоянии.

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение, если элемент управления "дерево" установлен. в противном случае — 0.

### <a name="example"></a>Пример

  См. пример для [CTreeCtrl:: сетчекк](#setcheck).

## <a name="ctreectrlgetchilditem"></a><a name="getchilditem"></a> CTreeCtrl:: Жетчилдитем

Вызовите эту функцию, чтобы получить элемент древовидного представления, являющийся дочерним элементом элемента, заданного параметром *хитем*.

```
HTREEITEM GetChildItem(HTREEITEM hItem) const;
```

### <a name="parameters"></a>Параметры

*хитем*<br/>
Маркер элемента дерева.

### <a name="return-value"></a>Возвращаемое значение

Маркер дочернего элемента в случае успешного выполнения; в противном случае — NULL.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#7](../../mfc/reference/codesnippet/cpp/ctreectrl-class_7.cpp)]

## <a name="ctreectrlgetcount"></a><a name="getcount"></a> CTreeCtrl:: NOCOUNT

Вызовите эту функцию, чтобы получить количество элементов в элементе управления иерархического представления.

```
UINT GetCount() const;
```

### <a name="return-value"></a>Возвращаемое значение

Число элементов в элементе управления иерархического представления.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#8](../../mfc/reference/codesnippet/cpp/ctreectrl-class_8.cpp)]

## <a name="ctreectrlgetdrophilightitem"></a><a name="getdrophilightitem"></a> CTreeCtrl:: Жетдрофилигхтитем

Вызовите эту функцию, чтобы получить элемент, являющийся целью операции перетаскивания.

```
HTREEITEM GetDropHilightItem() const;
```

### <a name="return-value"></a>Возвращаемое значение

Маркер элемента, отброшенного в случае успешного выполнения; в противном случае — NULL.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#9](../../mfc/reference/codesnippet/cpp/ctreectrl-class_9.cpp)]

## <a name="ctreectrlgeteditcontrol"></a><a name="geteditcontrol"></a> CTreeCtrl:: Жетедитконтрол

Вызывайте эту функцию для получения маркера элемента управления "поле ввода", используемого для изменения текста элемента древовидного представления.

```
CEdit* GetEditControl() const;
```

### <a name="return-value"></a>Возвращаемое значение

Указатель на элемент управления "поле ввода", используемый для изменения текста элемента (в случае успеха). в противном случае — NULL.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#10](../../mfc/reference/codesnippet/cpp/ctreectrl-class_10.cpp)]

## <a name="ctreectrlgetextendedstyle"></a><a name="getextendedstyle"></a> CTreeCtrl:: Жетекстендедстиле

Извлекает расширенные стили, которые использует текущий элемент управления "дерево-представление".

```
DWORD GetExtendedStyle() const;
```

### <a name="return-value"></a>Возвращаемое значение

Значение, содержащее побитовое сочетание (или) для текущих расширенных стилей элемента управления "дерево-представление". Дополнительные сведения см. в разделе [Расширенные стили элемента управления "дерево-представление](/windows/win32/Controls/tree-view-control-window-extended-styles)".

### <a name="remarks"></a>Примечания

Этот метод отправляет [TVM_GETEXTENDEDSTYLE](/windows/win32/Controls/tvm-getextendedstyle) сообщение, описанное в Windows SDK.

## <a name="ctreectrlgetfirstvisibleitem"></a><a name="getfirstvisibleitem"></a> CTreeCtrl:: Жетфирствисиблеитем

Вызовите эту функцию, чтобы получить первый видимый элемент элемента управления иерархического представления.

```
HTREEITEM GetFirstVisibleItem() const;
```

### <a name="return-value"></a>Возвращаемое значение

Маркер первого видимого элемента; в противном случае — NULL.

### <a name="example"></a>Пример

  См. пример для [CTreeCtrl:: сетчекк](#setcheck).

## <a name="ctreectrlgetimagelist"></a><a name="getimagelist"></a> CTreeCtrl::/ImageList

Вызывайте эту функцию для получения маркера обычного или стандартного списка изображений, связанного с элементом управления иерархического представления.

```
CImageList* GetImageList(UINT nImageList) const;
```

### <a name="parameters"></a>Параметры

*нимажелист*<br/>
Тип списка изображений для извлечения. Список изображений может иметь одно из следующих значений:

- TVSIL_NORMAL извлекает стандартный список изображений, который содержит выбранные и невыбранные изображения для элемента представления в виде дерева.

- TVSIL_STATE извлекает список изображений состояния, содержащий изображения для элементов представления в виде дерева, которые находятся в определенном пользователем состоянии.

### <a name="return-value"></a>Возвращаемое значение

Указатель на список изображений элемента управления в случае успешного выполнения; в противном случае — NULL.

### <a name="remarks"></a>Примечания

Каждый элемент в элементе управления иерархического представления может иметь связанную с ним пару растровых изображений. Одно изображение отображается, когда элемент выбран, а другой отображается, если элемент не выбран. Например, элемент может отображать открытую папку, когда она выбрана, и закрытую папку, если она не выбрана.

Дополнительные сведения о списках изображений см. в разделе класс [CImageList](../../mfc/reference/cimagelist-class.md) .

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#11](../../mfc/reference/codesnippet/cpp/ctreectrl-class_11.cpp)]

## <a name="ctreectrlgetindent"></a><a name="getindent"></a> CTreeCtrl:: Indent

Вызовите эту функцию, чтобы получить величину отступа (в пикселях) дочерних элементов относительно их родительских элементов.

```
UINT GetIndent() const;
```

### <a name="return-value"></a>Возвращаемое значение

Величина отступа, измеряемая в пикселях.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#12](../../mfc/reference/codesnippet/cpp/ctreectrl-class_12.cpp)]

## <a name="ctreectrlgetinsertmarkcolor"></a><a name="getinsertmarkcolor"></a> CTreeCtrl:: Жетинсертмаркколор

Эта функция члена реализует поведение сообщения Win32 [TVM_GETINSERTMARKCOLOR](/windows/win32/Controls/tvm-getinsertmarkcolor), как описано в Windows SDK.

```
COLORREF GetInsertMarkColor() const;
```

### <a name="return-value"></a>Возвращаемое значение

Значение COLORREF, содержащее текущий цвет отметки вставки.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#13](../../mfc/reference/codesnippet/cpp/ctreectrl-class_13.cpp)]

## <a name="ctreectrlgetitem"></a><a name="getitem"></a> CTreeCtrl:: DataItem

Вызовите эту функцию, чтобы получить атрибуты указанного элемента древовидного представления.

```
BOOL GetItem(TVITEM* pItem) const;
```

### <a name="parameters"></a>Параметры

*питем*<br/>
Указатель на структуру [твитем](/windows/win32/api/commctrl/ns-commctrl-tvitemw) , как описано в Windows SDK.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="example"></a>Пример

  См. пример для [CTreeCtrl::D елетеитем](#deleteitem).

## <a name="ctreectrlgetitemdata"></a><a name="getitemdata"></a> CTreeCtrl:: Жетитемдата

Вызовите эту функцию, чтобы получить зависящее от приложения значение, связанное с указанным элементом.

```
DWORD_PTR GetItemData(HTREEITEM hItem) const;
```

### <a name="parameters"></a>Параметры

*хитем*<br/>
Маркер элемента, данные которого необходимо извлечь.

### <a name="return-value"></a>Возвращаемое значение

Зависящее от приложения значение, связанное с элементом, заданным параметром *хитем*.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#14](../../mfc/reference/codesnippet/cpp/ctreectrl-class_14.cpp)]

## <a name="ctreectrlgetitemexpandedimageindex"></a><a name="getitemexpandedimageindex"></a> CTreeCtrl:: Жетитемекспандедимажеиндекс

Получает индекс изображения, отображаемого, когда указанный элемент текущего элемента управления "дерево" находится в развернутом состоянии.

```
int GetItemExpandedImageIndex(HTREEITEM hItem)const;
```

### <a name="parameters"></a>Параметры

*хитем*\
окне Обработчик элемента управления древовидного представления.

### <a name="return-value"></a>Возвращаемое значение

Индекс изображения, отображаемого, когда указанный элемент находится в развернутом состоянии.

### <a name="remarks"></a>Примечания

Этот метод отправляет [TVM_GETITEM](/windows/win32/Controls/tvm-getitem) сообщение, описанное в Windows SDK. Это сообщение возвращает структуру [твитемекс](/windows/win32/api/commctrl/ns-commctrl-tvitemexw) , описывающую элемент управления "дерево-представление", а затем этот метод извлекает `iExpandedImage` элемент из этой структуры.

## <a name="ctreectrlgetitemheight"></a><a name="getitemheight"></a> CTreeCtrl:: GetItemHeight

Эта функция члена реализует поведение сообщения Win32 [TVM_GETITEMHEIGHT](/windows/win32/Controls/tvm-getitemheight), как описано в Windows SDK.

```
SHORT GetItemHeight() const;
```

### <a name="return-value"></a>Возвращаемое значение

Высота элемента в пикселях.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#15](../../mfc/reference/codesnippet/cpp/ctreectrl-class_15.cpp)]

## <a name="ctreectrlgetitemimage"></a><a name="getitemimage"></a> CTreeCtrl:: GetItemImage

Каждый элемент в элементе управления иерархического представления может иметь связанную с ним пару растровых изображений.

```
BOOL GetItemImage(
    HTREEITEM hItem,
    int& nImage,
    int& nSelectedImage) const;
```

### <a name="parameters"></a>Параметры

*хитем*<br/>
Маркер элемента, изображение которого необходимо извлечь.

*нимаже*<br/>
Целое число, получающее индекс изображения элемента в списке изображений элемента управления иерархического представления.

*нселектедимаже*<br/>
Целое число, получающее индекс выбранного изображения элемента в списке изображений элемента управления иерархического представления.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Примечания

Изображения отображаются в левой части метки элемента. Одно изображение отображается, когда элемент выбран, а другой отображается, если элемент не выбран. Например, элемент может отображать открытую папку, когда она выбрана, и закрытую папку, если она не выбрана.

Вызовите эту функцию, чтобы получить индекс изображения элемента и его выбранного изображения в списке изображений элемента управления иерархического представления.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#16](../../mfc/reference/codesnippet/cpp/ctreectrl-class_16.cpp)]

## <a name="ctreectrlgetitempartrect"></a><a name="getitempartrect"></a> CTreeCtrl:: Жетитемпартрект

Извлекает ограничивающий прямоугольник для заданной части указанного элемента в текущем элементе управления "дерево-представление".

```
BOOL GetItemPartRect(
    HTREEITEM hItem,
    int nPart,
    LPRECT lpRect)const;
```

### <a name="parameters"></a>Параметры

*хитем*\
окне Обработчик элемента управления древовидного представления.

*нпарт*\
окне Идентификатор части. Необходимо задать значение TVGIPR_BUTTON.

*лпрект*\
заполняет Указатель на структуру [Rect](/windows/win32/api/windef/ns-windef-rect) . Если этот метод выполнен успешно, структура получает координаты прямоугольника части, указанной в *хитем* и *нпарт*.

### <a name="return-value"></a>Возвращаемое значение

Значение TRUE, если этот метод успешно выполнен; в противном случае — значение FALSE.

### <a name="remarks"></a>Примечания

Каждый элемент управления "дерево" ограничен графическим прямоугольником. При нажатии точки в этом прямоугольнике считается, что элемент *достигнут*. Этот метод возвращает самый крупный прямоугольник, такой, что при щелчке точки в прямоугольнике будет достигнут элемент, определенный параметром *хитем* .

Этот метод отправляет TVM_GETITEMPARTRECT сообщение, описанное в Windows SDK. Дополнительные сведения см. в описании макроса [TreeView_GetItemPartRect](/windows/win32/api/commctrl/nf-commctrl-treeview_getitempartrect) .

### <a name="example"></a>Пример

В следующем примере кода определяется переменная, `m_treeCtrl` которая используется для доступа к текущему элементу управления "дерево-представление". В примере кода также определяется целое число без знака и несколько ХТРИИТЕМ переменных. Эти переменные используются в следующем примере.

[!code-cpp[NVC_MFC_CTreeCtrl_s1#1](../../mfc/reference/codesnippet/cpp/ctreectrl-class_17.h)]

### <a name="example"></a>Пример

В следующем примере кода используется идентификатор доступа и метод [CTreeCtrl:: мапакЦидтоитем](#mapaccidtoitem) для получения маркера корневого элемента представления дерева. Затем в примере используется маркер и метод [CTreeCtrl:: жетитемпартрект](#getitempartrect) для рисования трехмерного прямоугольника вокруг этого элемента. В предыдущем разделе примера кода, который не показан, мы создали представление дерева, состоящее из корневого узла страны или региона для США, подузлов для состояний Пенсильвания и Вашингтон, а также элементов дерева для городов в этих штатах. Мы использовали метод [CTreeCtrl:: мапитемтоакЦид](#mapitemtoaccid) , чтобы связать корневой элемент представления дерева с идентификатором специальных возможностей.

[!code-cpp[NVC_MFC_CTreeCtrl_s1#5](../../mfc/reference/codesnippet/cpp/ctreectrl-class_18.cpp)]

## <a name="ctreectrlgetitemrect"></a><a name="getitemrect"></a> CTreeCtrl:: Жетитемрект

Вызовите эту функцию, чтобы получить ограничивающий прямоугольник для *хитем* и определить, является ли он видимым.

```
BOOL GetItemRect(
    HTREEITEM hItem,
    LPRECT lpRect,
    BOOL bTextOnly) const;
```

### <a name="parameters"></a>Параметры

*хитем*<br/>
Маркер элемента управления иерархического представления.

*лпрект*<br/>
Указатель на структуру [Rect](/windows/win32/api/windef/ns-windef-rect) , которая получает ограничивающий прямоугольник. Координаты задаются относительно левого верхнего угла элемента управления иерархического представления.

*бтекстонли*<br/>
Если этот параметр не равен нулю, ограничивающий прямоугольник включает только текст элемента. В противном случае он включает всю строку, занимаемую элементом в элементе управления иерархического представления.

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение, если элемент является видимым, с ограничивающим прямоугольником, содержащимся в *лпрект*. В противном случае — 0 с *лпрект* uninitiald.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#17](../../mfc/reference/codesnippet/cpp/ctreectrl-class_19.cpp)]

## <a name="ctreectrlgetitemstate"></a><a name="getitemstate"></a> CTreeCtrl:: Жетитемстате

Возвращает состояние элемента, указанного параметром *хитем*.

```
UINT GetItemState(
    HTREEITEM hItem,
    UINT nStateMask) const;
```

### <a name="parameters"></a>Параметры

*хитем*<br/>
Маркер элемента, состояние которого необходимо получить.

*нстатемаск*<br/>
Маска, указывающая одно или несколько состояний для извлечения. Дополнительные сведения о возможных значениях для *нстатемаск*см. в обсуждении `state` элементов и `stateMask` структуры [твитем](/windows/win32/api/commctrl/ns-commctrl-tvitemw) в Windows SDK.

### <a name="return-value"></a>Возвращаемое значение

Значение UINT, содержащее побитовое или для значений, заданных параметром Нстатемаск. Дополнительные сведения о возможных значениях см. в разделе [CTreeCtrl:: DataItem](#getitem). Чтобы найти значение для определенного состояния, выполните побитовую операцию и для значения State и возвращаемого значения, как показано в следующем примере.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#18](../../mfc/reference/codesnippet/cpp/ctreectrl-class_20.cpp)]

## <a name="ctreectrlgetitemstateex"></a><a name="getitemstateex"></a> CTreeCtrl:: Жетитемстатикс

Получает Расширенное состояние указанного элемента в текущем элементе управления "дерево-представление".

```
UINT GetItemStateEx(HTREEITEM hItem) const;
```

### <a name="parameters"></a>Параметры

*хитем*\
окне Обработчик элемента управления древовидного представления.

### <a name="return-value"></a>Возвращаемое значение

Расширенное состояние элемента. Дополнительные сведения см. в описании `uStateEx` члена структуры [твитемекс](/windows/win32/api/commctrl/ns-commctrl-tvitemexw) .

### <a name="remarks"></a>Примечания

Этот метод отправляет [TVM_GETITEM](/windows/win32/Controls/tvm-getitem) сообщение, описанное в Windows SDK. Это сообщение возвращает структуру [твитемекс](/windows/win32/api/commctrl/ns-commctrl-tvitemexw) , описывающую элемент управления "дерево-представление", и этот метод извлекает `uStateEx` элемент из этой структуры.

## <a name="ctreectrlgetitemtext"></a><a name="getitemtext"></a> CTreeCtrl:: Жетитемтекст

Возвращает текст элемента, заданного параметром *хитем*.

```
CString GetItemText(HTREEITEM hItem) const;
```

### <a name="parameters"></a>Параметры

*хитем*<br/>
Маркер элемента, текст которого необходимо получить.

### <a name="return-value"></a>Возвращаемое значение

`CString`Объект, содержащий текст элемента.

### <a name="example"></a>Пример

  См. пример для [CTreeCtrl:: жетнекститем](#getnextitem).

## <a name="ctreectrlgetlastvisibleitem"></a><a name="getlastvisibleitem"></a> CTreeCtrl:: Жетластвисиблеитем

Извлекает последний развернутый элемент узла в текущем элементе управления "дерево-представление".

```
HTREEITEM GetLastVisibleItem() const;
```

### <a name="return-value"></a>Возвращаемое значение

Обработчик последнего нераскрытого элемента узла, если метод выполнен успешно; в противном случае значение NULL.

### <a name="remarks"></a>Примечания

Этот метод отправляет [TVM_GETNEXTITEM](/windows/win32/Controls/tvm-getnextitem) сообщение, описанное в Windows SDK. Дополнительные сведения см. в описании флага TVGN_LASTVISIBLE в параметре *Flag* этого сообщения.

### <a name="example"></a>Пример

В следующем примере кода определяется переменная, `m_treeCtrl` которая используется для доступа к текущему элементу управления "дерево-представление". В примере кода также определяется целое число без знака и несколько ХТРИИТЕМ переменных. В следующем примере используется одна или несколько из этих переменных.

[!code-cpp[NVC_MFC_CTreeCtrl_s1#1](../../mfc/reference/codesnippet/cpp/ctreectrl-class_17.h)]

### <a name="example"></a>Пример

В следующем примере кода показано получение маркера для последнего нераскрытного элемента узла дерева, а затем Рисование трехмерного прямоугольника вокруг этого элемента. В предыдущем разделе примера кода, который не показан, мы создали представление дерева, состоящее из корневого узла страны или региона для США, подузлов для состояний Пенсильвания и Вашингтон, а также элементов дерева для городов в этих штатах.

[!code-cpp[NVC_MFC_CTreeCtrl_s1#6](../../mfc/reference/codesnippet/cpp/ctreectrl-class_21.cpp)]

## <a name="ctreectrlgetlinecolor"></a><a name="getlinecolor"></a> CTreeCtrl:: Жетлинеколор

Эта функция члена реализует поведение сообщения Win32 [TVM_GETLINECOLOR](/windows/win32/Controls/tvm-getlinecolor), как описано в Windows SDK.

```
COLORREF GetLineColor() const;
```

### <a name="return-value"></a>Возвращаемое значение

Цвет текущей линии.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#19](../../mfc/reference/codesnippet/cpp/ctreectrl-class_22.cpp)]

## <a name="ctreectrlgetnextitem"></a><a name="getnextitem"></a> CTreeCtrl:: Жетнекститем

Вызовите эту функцию, чтобы получить элемент древовидного представления с указанной связью, обозначенный параметром *нкоде* , на *хитем*.

```
HTREEITEM GetNextItem(
    HTREEITEM hItem,
    UINT nCode) const;
```

### <a name="parameters"></a>Параметры

*хитем*<br/>
Маркер элемента дерева.

*нкоде*<br/>
Флаг, указывающий тип связи с *хитем*. Этот флаг может принимать одно из следующих значений:

- TVGN_CARET Извлекает выбранный в данный момент элемент.

- TVGN_CHILD извлекает первый дочерний элемент элемента, указанного параметром *хитем* .

- TVGN_DROPHILITE извлекает элемент, который является целевым объектом операции перетаскивания.

- TVGN_FIRSTVISIBLE извлекает первый видимый элемент.

- TVGN_LASTVISIBLE извлекает последний развернутый элемент в дереве. При этом последний элемент, видимый в окне древовидного представления, не извлекается.

- TVGN_NEXT извлекает следующий элемент того же уровня.

- TVGN_NEXTVISIBLE извлекает следующий видимый элемент, следующий за указанным элементом.

- TVGN_PARENT Извлекает родительский элемент указанного элемента.

- TVGN_PREVIOUS извлекает предыдущий элемент того же уровня.

- TVGN_PREVIOUSVISIBLE извлекает первый видимый элемент, предшествующий указанному элементу.

- TVGN_ROOT извлекает первый дочерний элемент корневого элемента, частью которого является указанный элемент.

### <a name="return-value"></a>Возвращаемое значение

Маркер следующего элемента в случае успеха; в противном случае — NULL.

### <a name="remarks"></a>Примечания

Эта функция возвратит значение NULL, если извлекаемый элемент является корневым узлом дерева. Например, если вы используете это сообщение с флагом TVGN_PARENT в дочернем элементе первого уровня корневого узла древовидного представления, сообщение вернет значение NULL.

### <a name="example"></a>Пример

Пример использования `GetNextItem` в цикле см. в разделе [CTreeCtrl::D елетеитем](#deleteitem).

[!code-cpp[NVC_MFC_CTreeCtrl#20](../../mfc/reference/codesnippet/cpp/ctreectrl-class_23.cpp)]

## <a name="ctreectrlgetnextsiblingitem"></a><a name="getnextsiblingitem"></a> CTreeCtrl:: Жетнекстсиблингитем

Вызовите эту функцию, чтобы получить следующий элемент того же уровня для *хитем*.

```
HTREEITEM GetNextSiblingItem(HTREEITEM hItem) const;
```

### <a name="parameters"></a>Параметры

*хитем*<br/>
Маркер элемента дерева.

### <a name="return-value"></a>Возвращаемое значение

Маркер следующего элемента того же уровня; в противном случае — NULL.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#21](../../mfc/reference/codesnippet/cpp/ctreectrl-class_24.cpp)]

## <a name="ctreectrlgetnextvisibleitem"></a><a name="getnextvisibleitem"></a> CTreeCtrl:: Жетнекствисиблеитем

Вызовите эту функцию, чтобы получить следующий видимый элемент *хитем*.

```
HTREEITEM GetNextVisibleItem(HTREEITEM hItem) const;
```

### <a name="parameters"></a>Параметры

*хитем*<br/>
Маркер элемента дерева.

### <a name="return-value"></a>Возвращаемое значение

Маркер следующего видимого элемента; в противном случае — NULL.

### <a name="example"></a>Пример

  См. пример для [CTreeCtrl:: сетчекк](#setcheck).

## <a name="ctreectrlgetparentitem"></a><a name="getparentitem"></a> CTreeCtrl:: Жетпарентитем

Вызовите эту функцию, чтобы получить родительский объект *хитем*.

```
HTREEITEM GetParentItem(HTREEITEM hItem) const;
```

### <a name="parameters"></a>Параметры

*хитем*<br/>
Маркер элемента дерева.

### <a name="return-value"></a>Возвращаемое значение

Маркер родительского элемента; в противном случае — NULL.

### <a name="remarks"></a>Примечания

Эта функция возвратит значение NULL, если родительский элемент указанного элемента является корневым узлом дерева.

### <a name="example"></a>Пример

  См. пример для [CTreeCtrl:: енсуревисибле](#ensurevisible).

## <a name="ctreectrlgetprevsiblingitem"></a><a name="getprevsiblingitem"></a> CTreeCtrl:: Жетпревсиблингитем

Вызовите эту функцию, чтобы получить предыдущий элемент того же уровня для *хитем*.

```
HTREEITEM GetPrevSiblingItem(HTREEITEM hItem) const;
```

### <a name="parameters"></a>Параметры

*хитем*<br/>
Маркер элемента дерева.

### <a name="return-value"></a>Возвращаемое значение

Маркер предыдущего элемента того же уровня; в противном случае — NULL.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#22](../../mfc/reference/codesnippet/cpp/ctreectrl-class_25.cpp)]

## <a name="ctreectrlgetprevvisibleitem"></a><a name="getprevvisibleitem"></a> CTreeCtrl:: Жетпреввисиблеитем

Вызовите эту функцию, чтобы получить предыдущий видимый элемент *хитем*.

```
HTREEITEM GetPrevVisibleItem(HTREEITEM hItem) const;
```

### <a name="parameters"></a>Параметры

*хитем*<br/>
Маркер элемента дерева.

### <a name="return-value"></a>Возвращаемое значение

Маркер предыдущего видимого элемента; в противном случае — NULL.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#23](../../mfc/reference/codesnippet/cpp/ctreectrl-class_26.cpp)]

## <a name="ctreectrlgetrootitem"></a><a name="getrootitem"></a> CTreeCtrl:: Жетрутитем

Вызовите эту функцию, чтобы получить корневой элемент элемента управления иерархического представления.

```
HTREEITEM GetRootItem() const;
```

### <a name="return-value"></a>Возвращаемое значение

Маркер корневого элемента; в противном случае — NULL.

### <a name="example"></a>Пример

  См. пример для [CTreeCtrl:: едитлабел](#editlabel).

## <a name="ctreectrlgetscrolltime"></a><a name="getscrolltime"></a> CTreeCtrl:: Жетскроллтиме

Вызовите эту функцию члена, чтобы получить максимальное время прокрутки для элемента управления иерархического представления.

```
UINT GetScrollTime() const;
```

### <a name="return-value"></a>Возвращаемое значение

Максимальное время прокрутки в миллисекундах.

### <a name="remarks"></a>Примечания

Эта функция члена реализует поведение сообщения Win32 [TVM_GETSCROLLTIME](/windows/win32/Controls/tvm-getscrolltime), как описано в Windows SDK.

## <a name="ctreectrlgetselectedcount"></a><a name="getselectedcount"></a> CTreeCtrl:: Жетселектедкаунт

Извлекает число выбранных элементов в текущем элементе управления "дерево-представление".

```
UINT GetSelectedCount();
```

### <a name="return-value"></a>Возвращаемое значение

Число выбранных элементов.

### <a name="remarks"></a>Примечания

Этот метод отправляет [TVM_GETSELECTEDCOUNT](/windows/win32/Controls/tvm-getselectedcount) сообщение, описанное в Windows SDK.

## <a name="ctreectrlgetselecteditem"></a><a name="getselecteditem"></a> CTreeCtrl:: Жетселектедитем

Вызовите эту функцию, чтобы получить выбранный в данный момент элемент элемента управления иерархического представления.

```
HTREEITEM GetSelectedItem() const;
```

### <a name="return-value"></a>Возвращаемое значение

Маркер выбранного элемента; в противном случае — NULL.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#24](../../mfc/reference/codesnippet/cpp/ctreectrl-class_27.cpp)]

## <a name="ctreectrlgettextcolor"></a><a name="gettextcolor"></a> CTreeCtrl:: Жеттекстколор

Эта функция члена реализует поведение сообщения Win32 [TVM_GETTEXTCOLOR](/windows/win32/Controls/tvm-gettextcolor), как описано в Windows SDK.

```
COLORREF GetTextColor() const;
```

### <a name="return-value"></a>Возвращаемое значение

Значение COLORREF, представляющее текущий цвет текста. Если это значение равно-1, то элемент управления использует системный цвет для цвета текста.

### <a name="example"></a>Пример

  См. пример для [CTreeCtrl:: сеттекстколор](#settextcolor).

## <a name="ctreectrlgettooltips"></a><a name="gettooltips"></a> CTreeCtrl:: подсказки

Эта функция члена реализует поведение сообщения Win32 [TVM_GETTOOLTIPS](/windows/win32/Controls/tvm-gettooltips), как описано в Windows SDK.

```
CToolTipCtrl* GetToolTips() const;
```

### <a name="return-value"></a>Возвращаемое значение

Указатель на объект [CToolTipCtrl](../../mfc/reference/ctooltipctrl-class.md) , используемый элементом управления "дерево". Если в функции [CREATE](#create) -Member используется стиль TVS_NOTOOLTIPS, подсказки не используются и возвращается значение null.

### <a name="remarks"></a>Примечания

Реализация MFC `GetToolTips` возвращает `CToolTipCtrl` объект, который используется элементом управления "дерево", а не маркером элемента управления ToolTip.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#25](../../mfc/reference/codesnippet/cpp/ctreectrl-class_28.cpp)]

## <a name="ctreectrlgetvisiblecount"></a><a name="getvisiblecount"></a> CTreeCtrl:: Жетвисиблекаунт

Вызовите эту функцию, чтобы получить количество видимых элементов в элементе управления иерархического представления.

```
UINT GetVisibleCount() const;
```

### <a name="return-value"></a>Возвращаемое значение

Число видимых элементов в элементе управления иерархического представления; в противном случае — 1.

### <a name="example"></a>Пример

  См. пример для [CTreeCtrl:: сетчекк](#setcheck).

## <a name="ctreectrlhittest"></a><a name="hittest"></a> CTreeCtrl:: HitTest

Вызовите эту функцию, чтобы определить расположение заданной точки относительно клиентской области элемента управления иерархического представления.

```
HTREEITEM HitTest(
    CPoint pt,
    UINT* pFlags = NULL) const;

HTREEITEM HitTest(TVHITTESTINFO* pHitTestInfo) const;
```

### <a name="parameters"></a>Параметры

*пт*<br/>
Клиентские координаты тестируемой точки.

*пфлагс*<br/>
Указатель на целое число, получающее сведения о результатах проверки нажатия. Это может быть одно или несколько значений, перечисленных под `flags` элементом в разделе "Примечания".

*фиттестинфо*<br/>
Адрес структуры [твхиттестинфо](/windows/win32/api/commctrl/ns-commctrl-tvhittestinfo) , содержащей расположение для проверки попадания и получающее сведения о результатах проверки попадания.

### <a name="return-value"></a>Возвращаемое значение

Маркер элемента древовидного представления, который занимает указанную точку, или значение NULL, если элемент не занимает точку.

### <a name="remarks"></a>Примечания

При вызове этой функции параметр *PT* задает координаты проверяемой точки. Функция возвращает маркер элемента в указанной точке или значение NULL, если элемент не занимает точку. Кроме того, параметр *пфлагс* содержит значение, указывающее расположение указанной точки. Возможны следующие значения:

|Значение|Описание|
|-|-|
|TVHT_ABOVE|Над клиентской областью.|
|TVHT_BELOW|Под клиентской областью.|
|TVHT_NOWHERE|В клиентской области, но под последним элементом.|
|TVHT_ONITEM|На точечном рисунке или метке, связанной с элементом.|
|TVHT_ONITEMBUTTON|На кнопке, связанной с элементом.|
|TVHT_ONITEMICON|На точечном рисунке, связанном с элементом.|
|TVHT_ONITEMINDENT|В отступе, связанном с элементом.|
|TVHT_ONITEMLABEL|В метке (строка), связанной с элементом.|
|TVHT_ONITEMRIGHT|В области справа от элемента.|
|TVHT_ONITEMSTATEICON|На значке состояния для элемента представления в виде дерева, который находится в определенном пользователем состоянии.|
|TVHT_TOLEFT|Слева от клиентской области.|
|TVHT_TORIGHT|Справа от клиентской области.|

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#26](../../mfc/reference/codesnippet/cpp/ctreectrl-class_29.cpp)]

## <a name="ctreectrlinsertitem"></a><a name="insertitem"></a> CTreeCtrl:: InsertItem

Эта функция вызывается для вставки нового элемента в элемент управления иерархического представления.

```
HTREEITEM InsertItem(LPTVINSERTSTRUCT lpInsertStruct);

HTREEITEM InsertItem(
    UINT nMask,
    LPCTSTR lpszItem,
    int nImage,
    int nSelectedImage,
    UINT nState,
    UINT nStateMask,
    LPARAM lParam,
    HTREEITEM hParent,
    HTREEITEM hInsertAfter);

HTREEITEM InsertItem(
    LPCTSTR lpszItem,
    HTREEITEM hParent = TVI_ROOT,
    HTREEITEM hInsertAfter = TVI_LAST);

HTREEITEM InsertItem(
    LPCTSTR lpszItem,
    int nImage,
    int nSelectedImage,
    HTREEITEM hParent = TVI_ROOT,
    HTREEITEM hInsertAfter = TVI_LAST);
```

### <a name="parameters"></a>Параметры

*лпинсертструкт*<br/>
Указатель на объект `TVINSERTSTRUCT` , указывающий атрибуты вставляемого элемента представления дерева.

*нмаск*<br/>
Целое число, указывающее, какие атрибуты задаются. См `TVITEM` . структуру в Windows SDK.

*лпсзитем*<br/>
Адрес строки, содержащей текст элемента.

*нимаже*<br/>
Индекс изображения элемента в списке изображений элемента управления иерархического представления.

*нселектедимаже*<br/>
Индекс выбранного изображения элемента в списке изображений элемента управления иерархического представления.

*Nсведения*<br/>
Указывает значения для состояний элемента. Список соответствующих состояний см. в разделе состояния элементов элемента управления иерархического представления в Windows SDK.

*нстатемаск*<br/>
Указывает, какие состояния должны быть установлены. См `TVITEM` . структуру в Windows SDK.

*lParam*<br/>
Зависящее от приложения значение, связанное с элементом.

*хпарент*<br/>
Маркер родителя вставленного элемента.

*хинсертафтер*<br/>
Маркер элемента, после которого вставляется новый элемент.

### <a name="return-value"></a>Возвращаемое значение

В случае успешного выполнения маркера нового элемента; в противном случае — NULL.

### <a name="remarks"></a>Примечания

В примере показаны ситуации, в которых может потребоваться использовать каждую версию функции при вставке элемента элемента управления "дерево".

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#27](../../mfc/reference/codesnippet/cpp/ctreectrl-class_30.cpp)]

## <a name="ctreectrlitemhaschildren"></a><a name="itemhaschildren"></a> CTreeCtrl:: Итемхасчилдрен

Используйте эту функцию, чтобы определить, имеет ли элемент дерева, заданный параметром *хитем* , дочерние элементы.

```
BOOL ItemHasChildren(HTREEITEM hItem) const;
```

### <a name="parameters"></a>Параметры

*хитем*<br/>
Маркер элемента дерева.

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение, если элемент дерева, заданный параметром *хитем* , имеет дочерние элементы; 0, если нет.

### <a name="remarks"></a>Примечания

Если это так, можно использовать [CTreeCtrl:: жетчилдитем](#getchilditem) для получения этих дочерних элементов.

### <a name="example"></a>Пример

  См. пример для [CTreeCtrl:: жетселектедитем](#getselecteditem).

## <a name="ctreectrlmapaccidtoitem"></a><a name="mapaccidtoitem"></a> CTreeCtrl:: МапакЦидтоитем

Сопоставляет указанный идентификатор доступа с маркером элемента представления дерева в текущем элементе управления "дерево-представление".

```
HTREEITEM MapAccIdToItem(UINT uAccId) const;
```

### <a name="parameters"></a>Параметры

*уакЦид*\
окне Идентификатор доступа для элемента в элементе представления дерева.

### <a name="return-value"></a>Возвращаемое значение

Маркер элемента представления дерева ( `HTREEITEM` ), соответствующего параметру *уакЦид* . Дополнительные сведения см. в описании элемента *хитем* структуры [твитемекс](/windows/win32/api/commctrl/ns-commctrl-tvitemexw) .

### <a name="remarks"></a>Примечания

Специальные возможности — это приложения, которые помогают людям с ограниченными возможностями использовать компьютеры. Идентификатор доступа используется `IAccessible` интерфейсом для уникальной настройки элемента в окне. Дополнительные сведения об идентификаторах специальных возможностей см. в разделе "о поддержке Active Accessibility" в [сети разработчиков Майкрософт](https://go.microsoft.com/fwlink/p/?linkid=56322).

Этот метод отправляет [TVM_MAPACCIDTOHTREEITEM](/windows/win32/Controls/tvm-mapaccidtohtreeitem) сообщение, описанное в Windows SDK.

### <a name="example"></a>Пример

В следующем примере кода определяется переменная, `m_treeCtrl` которая используется для доступа к текущему элементу управления "дерево-представление". В примере кода также определяется целое число без знака и несколько ХТРИИТЕМ переменных. Эти переменные используются в следующем примере.

[!code-cpp[NVC_MFC_CTreeCtrl_s1#1](../../mfc/reference/codesnippet/cpp/ctreectrl-class_17.h)]

### <a name="example"></a>Пример

В следующем примере кода используется идентификатор доступа и метод [CTreeCtrl:: мапакЦидтоитем](#mapaccidtoitem) для получения маркера корневого элемента представления дерева. В примере используется маркер и метод [CTreeCtrl:: жетитемпартрект](#getitempartrect) для рисования трехмерных прямоугольников вокруг этого элемента. В предыдущем разделе примера кода, который не показан, мы создали представление дерева, состоящее из корневого узла страны или региона для США, подузлов для состояний Пенсильвания и Вашингтон, а также элементов дерева для городов в этих штатах. Мы использовали метод [CTreeCtrl:: мапитемтоакЦид](#mapitemtoaccid) , чтобы связать корневой элемент представления дерева с идентификатором специальных возможностей.

[!code-cpp[NVC_MFC_CTreeCtrl_s1#5](../../mfc/reference/codesnippet/cpp/ctreectrl-class_18.cpp)]

## <a name="ctreectrlmapitemtoaccid"></a><a name="mapitemtoaccid"></a> CTreeCtrl:: МапитемтоакЦид

Сопоставляет указанный маркер элемента представления дерева в текущем элементе управления "дерево-представление" с идентификатором доступа.

```
UINT MapItemToAccID(HTREEITEM hItem) const;
```

### <a name="parameters"></a>Параметры

*хитем*\
окне Маркер элемента представления дерева в элементе управления. Дополнительные сведения см. в описании элемента *хитем* структуры [твитемекс](/windows/win32/api/commctrl/ns-commctrl-tvitemexw) .

### <a name="return-value"></a>Возвращаемое значение

Идентификатор специальных возможностей, соответствующий параметру *хитем* .

### <a name="remarks"></a>Примечания

Специальные возможности — это приложения, которые помогают людям с ограниченными возможностями использовать компьютеры. Идентификатор доступа используется `IAccessible` интерфейсом для уникальной настройки элемента в окне. Дополнительные сведения об идентификаторах специальных возможностей см. в разделе "о поддержке Active Accessibility" в [сети разработчиков Майкрософт](https://go.microsoft.com/fwlink/p/?linkid=56322).

Этот метод отправляет [TVM_MAPHTREEITEMTOACCID](/windows/win32/Controls/tvm-maphtreeitemtoaccid) сообщение, описанное в Windows SDK.

### <a name="example"></a>Пример

В следующем примере кода определяется переменная, `m_treeCtrl` которая используется для доступа к текущему элементу управления "дерево-представление". В примере кода также определяется целое число без знака и несколько ХТРИИТЕМ переменных. Эти переменные используются в следующем примере.

[!code-cpp[NVC_MFC_CTreeCtrl_s1#1](../../mfc/reference/codesnippet/cpp/ctreectrl-class_17.h)]

### <a name="example"></a>Пример

В следующем примере кода получается идентификационный номер для элемента управления "дерево-представление". В предыдущем разделе примера кода, который не показан, мы создали представление дерева, состоящее из корневого узла страны или региона для США, подузлов для состояний Пенсильвания и Вашингтон, а также элементов дерева для городов в этих штатах. Этот пример кода получает уникальный идентификационный номер для корневого узла страны или региона.

[!code-cpp[NVC_MFC_CTreeCtrl_s1#2](../../mfc/reference/codesnippet/cpp/ctreectrl-class_31.cpp)]

## <a name="ctreectrlselect"></a><a name="select"></a> CTreeCtrl:: SELECT

Вызывайте эту функцию для выбора заданного элемента представления в виде дерева, прокрутки элемента на представление или перерисовки элемента в стиле, который используется для указания цели операции перетаскивания.

```
BOOL Select(
    HTREEITEM hItem,
    UINT nCode);
```

### <a name="parameters"></a>Параметры

*хитем*<br/>
Маркер элемента дерева.

*нкоде*<br/>
Тип выполняемого действия. Этот параметр может принимать одно из следующих значений:

- TVGN_CARET задает выделение для заданного элемента.

- TVGN_DROPHILITE перерисовывает заданный элемент в стиле, который используется для указания цели операции перетаскивания.

- TVGN_FIRSTVISIBLE Прокручивает представление в виде дерева по вертикали, чтобы заданный элемент был первым видимым элементом.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Примечания

Если *нкоде* содержит значение TVGN_CARET, то родительское окно получает TVN_SELCHANGING и TVN_SELCHANGED уведомления. Кроме того, если указанный элемент является дочерним по отношению к свернутому родительскому элементу, то родительский список дочерних элементов разворачивается для отображения указанного элемента. В этом случае родительское окно получает TVN_ITEMEXPANDING и TVN_ITEMEXPANDED сообщения уведомления.

### <a name="example"></a>Пример

  См. пример для [CTreeCtrl:: HitTest](#hittest).

## <a name="ctreectrlselectdroptarget"></a><a name="selectdroptarget"></a> CTreeCtrl:: Селектдроптаржет

Вызовите эту функцию, чтобы перерисовать элемент в стиле, используемом для указания цели операции перетаскивания.

```
BOOL SelectDropTarget(HTREEITEM hItem);
```

### <a name="parameters"></a>Параметры

*хитем*<br/>
Маркер элемента дерева.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#9](../../mfc/reference/codesnippet/cpp/ctreectrl-class_9.cpp)]

## <a name="ctreectrlselectitem"></a><a name="selectitem"></a> CTreeCtrl:: Селектитем

Вызовите эту функцию, чтобы выбрать заданный элемент представления в виде дерева.

```
BOOL SelectItem(HTREEITEM hItem);
```

### <a name="parameters"></a>Параметры

*хитем*<br/>
Маркер элемента дерева.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Примечания

Если *хитем* имеет значение null, эта функция не выбирает элемент.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#26](../../mfc/reference/codesnippet/cpp/ctreectrl-class_29.cpp)]

## <a name="ctreectrlselectsetfirstvisible"></a><a name="selectsetfirstvisible"></a> CTreeCtrl:: Селектсетфирствисибле

Вызывайте эту функцию, чтобы прокручивать представление в виде дерева по вертикали, чтобы заданный элемент был первым видимым элементом.

```
BOOL SelectSetFirstVisible(HTREEITEM hItem);
```

### <a name="parameters"></a>Параметры

*хитем*<br/>
Маркер элемента дерева, который должен быть установлен в качестве первого видимого элемента.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Примечания

Функция отправляет сообщение в окно с параметрами сообщения TVM_SELECTITEM и TVGN_FIRSTVISIBLE.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#28](../../mfc/reference/codesnippet/cpp/ctreectrl-class_32.cpp)]

## <a name="ctreectrlsetautoscrollinfo"></a><a name="setautoscrollinfo"></a> CTreeCtrl:: Сетаутоскроллинфо

Задает частоту прокрутки текущего элемента управления "дерево-представление".

```
BOOL SetAutoscrollInfo(
    UINT uPixelsPerSec,
    UINT uUpdateTime);
```

### <a name="parameters"></a>Параметры

*упикселсперсек*\
окне Число пикселей в секунду для прокрутки.

*уупдатетиме*\
окне Интервал времени между обновлениями элемента управления.

### <a name="return-value"></a>Возвращаемое значение

Всегда возвращает значение TRUE.

### <a name="remarks"></a>Примечания

Параметры прокрутки используются для прокрутки элемента, который в данный момент не виден. Элемент управления "представление дерева" должен иметь расширенный стиль TVS_EX_AUTOHSCROLL, который описан в разделе [Расширенные стили элемента управления "дерево-представление](/windows/win32/Controls/tree-view-control-window-extended-styles)".

Этот метод отправляет [TVM_SETAUTOSCROLLINFO](/windows/win32/Controls/tvm-setautoscrollinfo) сообщение, описанное в Windows SDK.

### <a name="example"></a>Пример

В следующем примере кода определяется переменная, `m_treeCtrl` которая используется для доступа к текущему элементу управления "дерево-представление". В примере кода также определяется целое число без знака и несколько ХТРИИТЕМ переменных. Эти переменные используются в следующем примере.

[!code-cpp[NVC_MFC_CTreeCtrl_s1#1](../../mfc/reference/codesnippet/cpp/ctreectrl-class_17.h)]

### <a name="example"></a>Пример

В следующем примере кода задается поведение прокрутки для текущего элемента управления "дерево-представление". В предыдущем разделе примера кода, который не показан, мы создали представление дерева, состоящее из корневого узла страны или региона для США, подузлов для состояний Пенсильвания и Вашингтон, а также элементов дерева для городов в этих штатах. Мы намеренно сделали элемент управления "дерево-представление" узким, чтобы он автоматически прокручивается для отображения элемента дерева, имеющего фокус. В примере кода элемент управления "дерево" задается для автоматической прокрутки на 30 пикселей в секунду до тех пор, пока элемент дерева не станет видимым.

[!code-cpp[NVC_MFC_CTreeCtrl_s1#4](../../mfc/reference/codesnippet/cpp/ctreectrl-class_33.cpp)]

## <a name="ctreectrlsetbkcolor"></a><a name="setbkcolor"></a> CTreeCtrl:: Сетбкколор

Эта функция члена реализует поведение сообщения Win32 [TVM_SETBKCOLOR](/windows/win32/Controls/tvm-setbkcolor), как описано в Windows SDK.

```
COLORREF SetBkColor(COLORREF clr);
```

### <a name="parameters"></a>Параметры

*среду*<br/>
Значение COLORREF, содержащее новый цвет фона. Если это значение равно-1, то элемент управления вернется к использованию системного цвета для цвета фона.

### <a name="return-value"></a>Возвращаемое значение

Значение COLORREF, представляющее текущий цвет текста. Если это значение равно-1, то элемент управления использует системный цвет для цвета текста.

### <a name="example"></a>Пример

  См. пример для [CTreeCtrl:: сеттекстколор](#settextcolor).

## <a name="ctreectrlsetcheck"></a><a name="setcheck"></a> CTreeCtrl:: Сетчекк

Вызовите эту функцию-член, чтобы установить состояние проверки для элемента управления "дерево".

```
BOOL SetCheck(
    HTREEITEM hItem,
    BOOL fCheck = TRUE);
```

### <a name="parameters"></a>Параметры

*хитем*<br/>
ХТРИИТЕМ для получения изменения состояния проверки.

*фчекк*<br/>
Указывает, должен ли элемент управления "дерево" быть установлен или снят. По умолчанию `SetCheck` задает элемент для проверки.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Примечания

При проверке элемента управления "дерево" ( *фчекк* имеет значение true) элемент отображается с соседней галочкой.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#29](../../mfc/reference/codesnippet/cpp/ctreectrl-class_34.cpp)]

### <a name="example"></a>Пример

Чтобы использовать флажки, установите TVS_CHECKBOXES перед заполнением элемента управления "дерево".

[!code-cpp[NVC_MFC_CTreeCtrl#30](../../mfc/reference/codesnippet/cpp/ctreectrl-class_35.cpp)]

## <a name="ctreectrlsetextendedstyle"></a><a name="setextendedstyle"></a> CTreeCtrl:: Сетекстендедстиле

Задает расширенные стили для текущего элемента управления "дерево-представление".

```
DWORD SetExtendedStyle(
    DWORD dwExMask,
    DWORD dwExStyles);
```

### <a name="parameters"></a>Параметры

*двексмаск*\
окне Битовая маска, указывающая, какие стили в текущем элементе управления "дерево" зависят от этого метода. Если этот параметр равен нулю, он игнорируется, и значение параметра *двексстилес* присваивается элементу управления "дерево-представление". Укажите ноль или побитовое сочетание (или) стилей, описанных в разделе [Расширенные стили элемента управления "дерево-представление](/windows/win32/Controls/tree-view-control-window-extended-styles)".

*двексстилес*\
окне Битовая маска, указывающая, какие стили в текущем элементе управления "дерево-представление" необходимо установить или очистить. Чтобы задать сочетание стилей, укажите побитовое сочетание (или) стилей, описанных в разделе [Расширенные стили элемента управления "дерево-представление](/windows/win32/Controls/tree-view-control-window-extended-styles)". Чтобы очистить набор стилей, укажите ноль.

### <a name="return-value"></a>Возвращаемое значение

Значение, содержащее предыдущие стили расширенного элемента управления.

### <a name="remarks"></a>Примечания

Этот метод очищает стили, указанные в параметре *двексмаск* , а затем устанавливает стили, указанные в параметре *двексстилес* . Изменяются только расширенные стили, соответствующие битам в *двексмаск* .

Этот метод отправляет [TVM_SETEXTENDEDSTYLE](/windows/win32/Controls/tvm-setextendedstyle) сообщение, описанное в Windows SDK.

### <a name="example"></a>Пример

В следующем примере кода определяется переменная, `m_treeCtrl` которая используется для доступа к текущему элементу управления "дерево-представление". В примере кода также определяется целое число без знака и несколько ХТРИИТЕМ переменных. Эти переменные используются в следующем примере.

[!code-cpp[NVC_MFC_CTreeCtrl_s1#1](../../mfc/reference/codesnippet/cpp/ctreectrl-class_17.h)]

### <a name="example"></a>Пример

В следующем примере кода добавляется расширенный стиль TVS_EX_AUTOHSCROLL к текущему элементу управления "дерево-представление". В предыдущем разделе примера кода, который не показан, мы создали представление дерева, состоящее из корневого узла страны или региона для США, подузлов для состояний Пенсильвания и Вашингтон, а также элементов дерева для городов в этих штатах. Мы намеренно сделали элемент управления "дерево-представление" узким, чтобы он автоматически прокручивается для отображения элемента дерева, имеющего фокус.

[!code-cpp[NVC_MFC_CTreeCtrl_s1#3](../../mfc/reference/codesnippet/cpp/ctreectrl-class_36.cpp)]

## <a name="ctreectrlsetimagelist"></a><a name="setimagelist"></a> CTreeCtrl:: Сетимажелист

Вызовите эту функцию, чтобы задать стандартный список или изображение состояния для элемента управления иерархического представления и перерисовать элемент управления с помощью новых изображений.

```
CImageList* SetImageList(
    CImageList* pImageList,
    int nImageListType);
```

### <a name="parameters"></a>Параметры

*пимажелист*<br/>
Указатель на список изображений для назначения. Если *пимажелист* имеет значение null, все изображения удаляются из элемента управления иерархического представления.

*нимажелисттипе*<br/>
Тип списка изображений для задания. Список изображений может иметь одно из следующих значений:

- TVSIL_NORMAL задает стандартный список изображений, который содержит выбранные и невыбранные изображения для элемента представления в виде дерева. Это состояние необходимо использовать для наложения изображений.

- TVSIL_STATE задает список изображений состояния, содержащий изображения для элементов представления в виде дерева, которые находятся в определенном пользователем состоянии.

### <a name="return-value"></a>Возвращаемое значение

Указатель на предыдущий список изображений, если таковой имеется; в противном случае — NULL.

### <a name="example"></a>Пример

  См. пример для [CTreeCtrl:: коimagelist](#getimagelist).

## <a name="ctreectrlsetindent"></a><a name="setindent"></a> CTreeCtrl:: Сетиндент

Вызовите эту функцию, чтобы задать ширину отступа для элемента управления иерархического представления и перерисовать элемент управления для отражения новой ширины.

```cpp
void SetIndent(UINT nIndent);
```

### <a name="parameters"></a>Параметры

*ниндент*<br/>
Ширина (в пикселях) отступа. Если *ниндент* меньше, чем определенная системой минимальная ширина, то для новой ширины задается минимум, определенный системой.

### <a name="example"></a>Пример

  См. пример для [CTreeCtrl:: Indent](#getindent).

## <a name="ctreectrlsetinsertmark"></a><a name="setinsertmark"></a> CTreeCtrl:: Сетинсертмарк

Эта функция члена реализует поведение сообщения Win32 [TVM_SETINSERTMARK](/windows/win32/Controls/tvm-setinsertmark), как описано в Windows SDK.

```
BOOL SetInsertMark(
    HTREEITEM hItem,
    BOOL fAfter = TRUE);
```

### <a name="parameters"></a>Параметры

*хитем*<br/>
ХТРИИТЕМ, указывающий, в какой элемент будет помещена метка вставки. Если этот аргумент имеет значение NULL, то метка вставки удаляется.

*фафтер*<br/>
Логическое значение, указывающее, размещается ли метка вставки до или после указанного элемента. Если этот аргумент не равен нулю, то после элемента будет помещен знак вставки. Если этот аргумент равен нулю, то метка вставки будет помещена перед элементом.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#31](../../mfc/reference/codesnippet/cpp/ctreectrl-class_37.cpp)]

## <a name="ctreectrlsetinsertmarkcolor"></a><a name="setinsertmarkcolor"></a> CTreeCtrl:: Сетинсертмаркколор

Эта функция члена реализует поведение сообщения Win32 [TVM_SETINSERTMARKCOLOR](/windows/win32/Controls/tvm-setinsertmarkcolor), как описано в Windows SDK.

```
COLORREF SetInsertMarkColor(COLORREF clrNew);
```

### <a name="parameters"></a>Параметры

*клрнев*<br/>
Значение COLORREF, содержащее новый цвет метки вставки.

### <a name="return-value"></a>Возвращаемое значение

Значение COLORREF, содержащее предыдущий цвет отметки вставки.

### <a name="example"></a>Пример

  См. пример для [CTreeCtrl:: жетинсертмаркколор](#getinsertmarkcolor).

## <a name="ctreectrlsetitem"></a><a name="setitem"></a> CTreeCtrl:: Сетитем

Вызовите эту функцию, чтобы задать атрибуты указанного элемента древовидного представления.

```
BOOL SetItem(TVITEM* pItem);

BOOL SetItem(
    HTREEITEM hItem,
    UINT nMask,
    LPCTSTR lpszItem,
    int nImage,
    int nSelectedImage,
    UINT nState,
    UINT nStateMask,
    LPARAM lParam);
```

### <a name="parameters"></a>Параметры

*питем*<br/>
Указатель на структуру [твитем](/windows/win32/api/commctrl/ns-commctrl-tvitemw) , содержащую новые атрибуты элемента, как описано в Windows SDK.

*хитем*<br/>
Маркер элемента, атрибуты которого должны быть заданы. См `hItem` `TVITEM` . элемент структуры в Windows SDK.

*нмаск*<br/>
Целое число, указывающее, какие атрибуты задаются. См. член `mask` структуры `TVITEM`.

*лпсзитем*<br/>
Адрес строки, содержащей текст элемента.

*нимаже*<br/>
Индекс изображения элемента в списке изображений элемента управления иерархического представления. См. член `iImage` структуры `TVITEM`.

*нселектедимаже*<br/>
Индекс выбранного изображения элемента в списке изображений элемента управления иерархического представления. См. член `iSelectedImage` структуры `TVITEM`.

*Nсведения*<br/>
Указывает значения для состояний элемента. См. член `State` структуры `TVITEM`.

*нстатемаск*<br/>
Указывает, какие состояния должны быть установлены. См. член `stateMask` структуры `TVITEM`.

*lParam*<br/>
Зависящее от приложения значение, связанное с элементом.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Примечания

В `TVITEM` структуре `hItem` элемент определяет элемент, а `mask` член определяет, какие атрибуты задаются.

Если `mask` элемент или параметр *нмаск* указывает значение TVIF_TEXT, то `pszText` элемент или *лпсзитем* является адресом строки, завершающейся нулем, и `cchTextMax` элемент игнорируется. Если `mask` (или *нмаск*) указывает значение TVIF_STATE, то элемент `stateMask` или параметр *нстатемаск* указывает, какие состояния элементов следует изменить, а `state` Параметр Member или *nсведения* содержит значения этих состояний.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#32](../../mfc/reference/codesnippet/cpp/ctreectrl-class_38.cpp)]

## <a name="ctreectrlsetitemdata"></a><a name="setitemdata"></a> CTreeCtrl:: Сетитемдата

Вызовите эту функцию, чтобы задать зависящее от приложения значение, связанное с указанным элементом.

```
BOOL SetItemData(
    HTREEITEM hItem,
    DWORD_PTR dwData);
```

### <a name="parameters"></a>Параметры

*хитем*<br/>
Маркер элемента, данные которого необходимо извлечь.

*двдата*<br/>
Зависящее от приложения значение, связанное с элементом, заданным параметром *хитем*.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#33](../../mfc/reference/codesnippet/cpp/ctreectrl-class_39.cpp)]

## <a name="ctreectrlsetitemexpandedimageindex"></a><a name="setitemexpandedimageindex"></a> CTreeCtrl:: Сетитемекспандедимажеиндекс

Задает индекс изображения, отображаемого, когда указанный элемент текущего элемента управления "представление дерева" находится в развернутом состоянии.

```
BOOL SetItemExpandedImageIndex(
    HTREEITEM hItem,
    int iExpandedImage);
```

### <a name="parameters"></a>Параметры

*хитем*\
окне Обработчик элемента управления древовидного представления.

*иекспандедимаже*\
окне Индекс изображения, отображаемого, когда указанный элемент находится в развернутом состоянии.

### <a name="return-value"></a>Возвращаемое значение

Значение TRUE, если этот метод успешно выполнен; в противном случае — значение FALSE.

### <a name="remarks"></a>Примечания

Этот метод отправляет [TVM_SETITEM](/windows/win32/Controls/tvm-setitem) сообщение, описанное в Windows SDK. Этот метод присваивает параметр *иекспандедимаже* `iExpandedImage` члену структуры [твитемекс](/windows/win32/api/commctrl/ns-commctrl-tvitemexw) , а затем использует эту структуру в сообщении.

### <a name="example"></a>Пример

В следующем примере кода определяется переменная, `m_treeCtrl` которая используется для доступа к текущему элементу управления "дерево-представление". В примере кода также определяется целое число без знака и несколько ХТРИИТЕМ переменных. Эти переменные используются в следующем примере.

[!code-cpp[NVC_MFC_CTreeCtrl_s1#1](../../mfc/reference/codesnippet/cpp/ctreectrl-class_17.h)]

### <a name="example"></a>Пример

Следующий пример кода представляет собой тривиальный тест, позволяющий определить, возвращает ли метод [CTreeCtrl:: жетитемекспандедимажеиндекс](#getitemexpandedimageindex) значение, заданное методом [CTreeCtrl:: сетитемекспандедимажеиндекс](#setitemexpandedimageindex) . В предыдущем разделе примера кода, который не показан, мы создали представление дерева, состоящее из корневого узла страны или региона для США, подузлов для состояний Пенсильвания и Вашингтон, а также элементов дерева для городов в этих штатах.

[!code-cpp[NVC_MFC_CTreeCtrl_s1#8](../../mfc/reference/codesnippet/cpp/ctreectrl-class_40.cpp)]

## <a name="ctreectrlsetitemheight"></a><a name="setitemheight"></a> CTreeCtrl:: Сетитемхеигхт

Эта функция члена реализует поведение сообщения Win32 [TVM_SETITEMHEIGHT](/windows/win32/Controls/tvm-setitemheight), как описано в Windows SDK.

```
SHORT SetItemHeight(SHORT cyHeight);
```

### <a name="parameters"></a>Параметры

*цихеигхт*<br/>
Задает новую высоту каждого элемента в представлении в виде дерева (в пикселях). Если этот аргумент меньше, чем высота изображений, то для него будет задана высота изображений. Если этот аргумент не является четным, он округляется вниз до ближайшего четного значения. Если этот аргумент равен-1, элемент управления вернется к использованию высоты элемента по умолчанию.

### <a name="return-value"></a>Возвращаемое значение

Предыдущая высота элементов в пикселях.

### <a name="example"></a>Пример

  См. пример для [CTreeCtrl:: GetItemHeight](#getitemheight).

## <a name="ctreectrlsetitemimage"></a><a name="setitemimage"></a> CTreeCtrl:: Сетитемимаже

Связывает изображения с элементом.

```
BOOL SetItemImage(
    HTREEITEM hItem,
    int nImage,
    int nSelectedImage);
```

### <a name="parameters"></a>Параметры

*хитем*<br/>
Маркер элемента, изображение которого необходимо задать.

*нимаже*<br/>
Индекс изображения элемента в списке изображений элемента управления иерархического представления.

*нселектедимаже*<br/>
Индекс выбранного изображения элемента в списке изображений элемента управления иерархического представления.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Примечания

Каждый элемент в элементе управления иерархического представления может иметь связанную с ним пару растровых изображений. Изображения отображаются в левой части метки элемента. Одно изображение отображается, когда элемент выбран, а другой отображается, если элемент не выбран. Например, элемент может отображать открытую папку, когда она выбрана, и закрытую папку, если она не выбрана.

Вызовите эту функцию, чтобы задать индекс изображения элемента и его выбранного изображения в списке изображений элемента управления иерархического представления.

Дополнительные сведения об образах см. в разделе [CImageList](../../mfc/reference/cimagelist-class.md).

### <a name="example"></a>Пример

  См. пример для [CTreeCtrl:: GetItemImage](#getitemimage).

## <a name="ctreectrlsetitemstate"></a><a name="setitemstate"></a> CTreeCtrl:: Сетитемстате

Задает состояние элемента, указанного параметром *хитем*.

```
BOOL SetItemState(
    HTREEITEM hItem,
    UINT nState,
    UINT nStateMask);
```

### <a name="parameters"></a>Параметры

*хитем*<br/>
Маркер элемента, состояние которого необходимо задать.

*Nсведения*<br/>
Указывает новые состояния для элемента.

*нстатемаск*<br/>
Указывает, какие состояния должны быть изменены.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Примечания

Дополнительные сведения о состояниях см. в разделе [CTreeCtrl:: DataItem](#getitem).

### <a name="example"></a>Пример

  См. пример для [CTreeCtrl:: жетитемстате](#getitemstate).

## <a name="ctreectrlsetitemstateex"></a><a name="setitemstateex"></a> CTreeCtrl:: Сетитемстатикс

Задает расширенное состояние указанного элемента в текущем элементе управления "дерево-представление".

```
BOOL SetItemStateEx(
    HTREEITEM hItem,
    UINT uStateEx);
```

### <a name="parameters"></a>Параметры

*хитем*\
окне Обработчик элемента управления древовидного представления.

*устатикс*\
окне Расширенное состояние элемента. Дополнительные сведения см. в описании `uStateEx` члена структуры [твитемекс](/windows/win32/api/commctrl/ns-commctrl-tvitemexw) .

### <a name="return-value"></a>Возвращаемое значение

Значение TRUE, если этот метод успешно выполнен; в противном случае — значение FALSE.

### <a name="remarks"></a>Примечания

Этот метод отправляет [TVM_SETITEM](/windows/win32/Controls/tvm-setitem) сообщение, описанное в Windows SDK. Этот метод присваивает параметр *устатикс* `uStateEx` члену структуры [твитемекс](/windows/win32/api/commctrl/ns-commctrl-tvitemexw) , а затем использует эту структуру в сообщении.

### <a name="example"></a>Пример

В следующем примере кода определяется переменная, `m_treeCtrl` которая используется для доступа к текущему элементу управления "дерево-представление". В примере кода также определяется целое число без знака и несколько ХТРИИТЕМ переменных. Эти переменные используются в следующем примере.

[!code-cpp[NVC_MFC_CTreeCtrl_s1#1](../../mfc/reference/codesnippet/cpp/ctreectrl-class_17.h)]

### <a name="example"></a>Пример

В следующем примере кода элемент представления дерева устанавливается в состояние Disabled (отключено). В предыдущем разделе примера кода, который не показан, мы создали представление дерева, состоящее из корневого узла страны или региона для США, подузлов для состояний Пенсильвания и Вашингтон, а также элементов дерева для городов в этих штатах. В этом примере кода для узла Пенсильвания устанавливается состояние Disabled (отключено).

[!code-cpp[NVC_MFC_CTreeCtrl_s1#7](../../mfc/reference/codesnippet/cpp/ctreectrl-class_41.cpp)]

## <a name="ctreectrlsetitemtext"></a><a name="setitemtext"></a> CTreeCtrl:: Сетитемтекст

Задает текст элемента, заданного параметром *хитем*.

```
BOOL SetItemText(
    HTREEITEM hItem,
    LPCTSTR lpszItem);
```

### <a name="parameters"></a>Параметры

*хитем*<br/>
Маркер элемента, текст которого необходимо задать.

*лпсзитем*<br/>
Адрес строки, содержащей новый текст для элемента

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#34](../../mfc/reference/codesnippet/cpp/ctreectrl-class_42.cpp)]

## <a name="ctreectrlsetlinecolor"></a><a name="setlinecolor"></a> CTreeCtrl:: Сетлинеколор

Вызовите эту функцию члена, чтобы задать текущий цвет линии для элемента управления иерархического представления.

```
COLORREF SetLineColor(COLORREF clrNew = CLR_DEFAULT);
```

### <a name="parameters"></a>Параметры

*клрнев*<br/>
Цвет новой линии.

### <a name="return-value"></a>Возвращаемое значение

Цвет предыдущей строки.

### <a name="remarks"></a>Примечания

Эта функция члена реализует поведение сообщения Win32 [TVM_SETLINECOLOR](/windows/win32/Controls/tvm-setlinecolor), как описано в Windows SDK.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#35](../../mfc/reference/codesnippet/cpp/ctreectrl-class_43.cpp)]

## <a name="ctreectrlsetscrolltime"></a><a name="setscrolltime"></a> CTreeCtrl:: Сетскроллтиме

Вызовите эту функцию члена, чтобы установить максимальное время прокрутки для элемента управления иерархического представления.

```
UINT SetScrollTime(UINT uScrollTime);
```

### <a name="parameters"></a>Параметры

*ускроллтиме*<br/>
Новое максимальное время прокрутки в миллисекундах. Если это значение меньше 100, оно округляется до 100.

### <a name="return-value"></a>Возвращаемое значение

Предыдущее максимальное время прокрутки в миллисекундах.

### <a name="remarks"></a>Примечания

Эта функция члена реализует поведение сообщения Win32 [TVM_SETSCROLLTIME](/windows/win32/Controls/tvm-setscrolltime), как описано в Windows SDK.

## <a name="ctreectrlsettextcolor"></a><a name="settextcolor"></a> CTreeCtrl:: Сеттекстколор

Эта функция члена реализует поведение сообщения Win32 [TVM_SETTEXTCOLOR](/windows/win32/Controls/tvm-settextcolor), как описано в Windows SDK.

```
COLORREF SetTextColor(COLORREF clr);
```

### <a name="parameters"></a>Параметры

*среду*<br/>
Значение COLORREF, содержащее новый цвет текста. Если этот аргумент равен-1, элемент управления вернется к использованию системного цвета для цвета текста.

### <a name="return-value"></a>Возвращаемое значение

Значение COLORREF, представляющее предыдущий цвет текста. Если это значение равно-1, элемент управления использует системный цвет для цвета текста.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#36](../../mfc/reference/codesnippet/cpp/ctreectrl-class_44.cpp)]

## <a name="ctreectrlsettooltips"></a><a name="settooltips"></a> CTreeCtrl:: Сеттултипс

Эта функция члена реализует поведение сообщения Win32 [TVM_SETTOOLTIPS](/windows/win32/Controls/tvm-settooltips), как описано в Windows SDK.

```
CToolTipCtrl* SetToolTips(CToolTipCtrl* pWndTip);
```

### <a name="parameters"></a>Параметры

*пвндтип*<br/>
Указатель на объект [CToolTipCtrl](../../mfc/reference/ctooltipctrl-class.md) , который будет использоваться элементом управления "дерево".

### <a name="return-value"></a>Возвращаемое значение

Указатель на объект [CToolTipCtrl](../../mfc/reference/ctooltipctrl-class.md) , содержащий подсказку, ранее используемую элементом управления, или значение null, если ни одна из подсказок не использовалась ранее.

### <a name="remarks"></a>Примечания

Чтобы использовать подсказки, укажите стиль TVS_NOTOOLTIPS при создании `CTreeCtrl` объекта.

### <a name="example"></a>Пример

  См. пример для [CTreeCtrl::.](#gettooltips)

## <a name="ctreectrlshowinfotip"></a><a name="showinfotip"></a> CTreeCtrl:: Шовинфотип

Отображает всплывающую подсказку для указанного элемента в текущем элементе управления "дерево-представление".

```cpp
void ShowInfoTip(HTREEITEM hItem);
```

### <a name="parameters"></a>Параметры

*хитем*\
окне Маркер элемента представления дерева в элементе управления. Дополнительные сведения см. в описании `hItem` члена структуры [твитемекс](/windows/win32/api/commctrl/ns-commctrl-tvitemexw) .

### <a name="remarks"></a>Примечания

Дополнительные сведения о различиях между подсказками и инфотипс см. в разделе "всплывающие подсказки и Инфотипс" в [сети разработчиков Microsoft](https://go.microsoft.com/fwlink/p/?linkid=56322).

Этот метод отправляет [TVM_SHOWINFOTIP](/windows/win32/Controls/tvm-showinfotip) сообщение, описанное в Windows SDK.

## <a name="ctreectrlsortchildren"></a><a name="sortchildren"></a> CTreeCtrl:: Сортчилдрен

Вызывайте эту функцию для сортировки дочерних элементов заданного родительского элемента в элементе управления "дерево" по алфавиту.

```
BOOL SortChildren(HTREEITEM hItem);
```

### <a name="parameters"></a>Параметры

*хитем*<br/>
Маркер родительского элемента, дочерние элементы которого должны быть отсортированы. Если *хитем* имеет значение null, сортировка выполняется из корня дерева.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Примечания

`SortChildren` не выполняет рекурсивный перебор дерева. будут отсортированы только непосредственные дочерние элементы *хитем* .

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#37](../../mfc/reference/codesnippet/cpp/ctreectrl-class_45.cpp)]

## <a name="ctreectrlsortchildrencb"></a><a name="sortchildrencb"></a> CTreeCtrl:: Сортчилдренкб

Вызывайте эту функцию для сортировки элементов древовидного представления с помощью определяемой приложением функции обратного вызова, которая сравнивает элементы.

```
BOOL SortChildrenCB(LPTVSORTCB pSort);
```

### <a name="parameters"></a>Параметры

*псорт*<br/>
Указатель на структуру [твсорткб](/windows/win32/api/commctrl/ns-commctrl-tvsortcb) .

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Примечания

Функция сравнения структуры, `lpfnCompare` ,,, должна возвращать отрицательное значение, если первый элемент должен предшествовать второму, положительное значение, если первый элемент должен следовать за вторым, или нуль, если два элемента эквивалентны.

Параметры *lParam1* и *lParam2* соответствуют `lParam` элементу структуры [твитем](/windows/win32/api/commctrl/ns-commctrl-tvitemw) для двух сравниваемых элементов. Параметр *лпарамсорт* соответствует `lParam` члену `TV_SORTCB` структуры.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#38](../../mfc/reference/codesnippet/cpp/ctreectrl-class_46.cpp)]

[!code-cpp[NVC_MFC_CTreeCtrl#39](../../mfc/reference/codesnippet/cpp/ctreectrl-class_47.cpp)]

## <a name="see-also"></a>См. также раздел

[Пример CMNCTRL1 для MFC](../../overview/visual-cpp-samples.md)<br/>
[CWnd, класс](../../mfc/reference/cwnd-class.md)<br/>
[Иерархическая диаграмма](../../mfc/hierarchy-chart.md)<br/>
[Класс CImageList](../../mfc/reference/cimagelist-class.md)
