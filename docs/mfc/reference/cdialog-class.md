---
title: Класс CDialog
ms.date: 09/07/2019
f1_keywords:
- CDialog
- AFXWIN/CDialog
- AFXWIN/CDialog::CDialog
- AFXWIN/CDialog::Create
- AFXWIN/CDialog::CreateIndirect
- AFXWIN/CDialog::DoModal
- AFXWIN/CDialog::EndDialog
- AFXWIN/CDialog::GetDefID
- AFXWIN/CDialog::GotoDlgCtrl
- AFXWIN/CDialog::InitModalIndirect
- AFXWIN/CDialog::MapDialogRect
- AFXWIN/CDialog::NextDlgCtrl
- AFXWIN/CDialog::OnInitDialog
- AFXWIN/CDialog::OnSetFont
- AFXWIN/CDialog::PrevDlgCtrl
- AFXWIN/CDialog::SetDefID
- AFXWIN/CDialog::SetHelpID
- AFXWIN/CDialog::OnCancel
- AFXWIN/CDialog::OnOK
helpviewer_keywords:
- CDialog [MFC], CDialog
- CDialog [MFC], Create
- CDialog [MFC], CreateIndirect
- CDialog [MFC], DoModal
- CDialog [MFC], EndDialog
- CDialog [MFC], GetDefID
- CDialog [MFC], GotoDlgCtrl
- CDialog [MFC], InitModalIndirect
- CDialog [MFC], MapDialogRect
- CDialog [MFC], NextDlgCtrl
- CDialog [MFC], OnInitDialog
- CDialog [MFC], OnSetFont
- CDialog [MFC], PrevDlgCtrl
- CDialog [MFC], SetDefID
- CDialog [MFC], SetHelpID
- CDialog [MFC], OnCancel
- CDialog [MFC], OnOK
ms.assetid: ca64b77e-2cd2-47e3-8eff-c2645ad578f9
ms.openlocfilehash: 03d58221fc22ef1a0efc5db1a3ac3077a45c382b
ms.sourcegitcommit: 1f009ab0f2cc4a177f2d1353d5a38f164612bdb1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/27/2020
ms.locfileid: "87212544"
---
# <a name="cdialog-class"></a>Класс CDialog

Базовый класс, используемый для отображения диалоговых окон на экране.

## <a name="syntax"></a>Синтаксис

```
class CDialog : public CWnd
```

## <a name="members"></a>Участники

### <a name="public-constructors"></a>Открытые конструкторы

|Имя|Описание|
|----------|-----------------|
|[CDialog:: CDialog](#cdialog)|Формирует объект `CDialog`.|

### <a name="public-methods"></a>Открытые методы

|Имя|Описание|
|----------|-----------------|
|[CDialog:: Create](#create)|Инициализирует объект `CDialog`. Создает немодальное диалоговое окно и прикрепляет его к `CDialog` объекту.|
|[CDialog:: Креатеиндирект](#createindirect)|Создает немодальное диалоговое окно из шаблона диалогового окна в памяти (не на основе ресурсов).|
|[CDialog::D Омодал](#domodal)|Вызывает модальное диалоговое окно и по завершении возвращает.|
|[CDialog:: EndDialog](#enddialog)|Закрывает модальное диалоговое окно.|
|[CDialog:: Жетдефид](#getdefid)|Возвращает идентификатор элемента управления "Кнопка" по умолчанию для диалогового окна.|
|[CDialog::GotoDlgCtrl](#gotodlgctrl)|Перемещает фокус на указанный элемент управления диалогового окна в диалоговом окне.|
|[CDialog:: Инитмодалиндирект](#initmodalindirect)|Создает модальное диалоговое окно из шаблона диалогового окна в памяти (не на основе ресурсов). Параметры сохраняются до `DoModal` вызова функции.|
|[CDialog:: Мапдиалогрект](#mapdialogrect)|Преобразует единицы диалогового окна прямоугольника в единицы экрана.|
|[CDialog:: Некстдлгктрл](#nextdlgctrl)|Перемещает фокус на следующий элемент управления диалогового окна в диалоговом окне.|
|[CDialog:: Онинитдиалог](#oninitdialog)|Переопределите для расширения инициализации диалогового окна.|
|[CDialog:: Онсетфонт](#onsetfont)|Переопределите, чтобы указать шрифт, который должен использоваться элементом управления "диалоговое окно" при отрисовке текста.|
|[CDialog::P Ревдлгктрл](#prevdlgctrl)|Перемещает фокус на предыдущий элемент управления диалогового окна в диалоговом окне.|
|[CDialog:: Сетдефид](#setdefid)|Изменяет элемент управления "Кнопка" по умолчанию для диалогового окна на указанную.|
|[CDialog:: Сеселпид](#sethelpid)|Задает контекстно-зависимый идентификатор справки для диалогового окна.|

### <a name="protected-methods"></a>Защищенные методы

|Имя|Описание|
|----------|-----------------|
|[CDialog:: OnCancel](#oncancel)|Переопределите для выполнения кнопки Отмена или клавиши ESC. По умолчанию диалоговое окно закрывается и `DoModal` возвращается значение идканцел.|
|[CDialog:: ОНОК](#onok)|Переопределите, чтобы выполнить действие кнопки ОК в модальном диалоговом окне. По умолчанию диалоговое окно закрывается и `DoModal` возвращается значение идок.|

## <a name="remarks"></a>Примечания

Диалоговые окна имеют два типа: модальные и немодальные. Пользователь должен закрыть модальное диалоговое окно, прежде чем продолжить выполнение приложения. Немодальное диалоговое окно позволяет пользователю отобразить диалоговое окно и вернуться к другой задаче без отмены или удаления этого диалогового окна.

`CDialog`Объект — это сочетание шаблона диалогового окна и класса, `CDialog` производного от. Используйте редактор диалоговых окон, чтобы создать шаблон диалогового окна и сохранить его в ресурсе, а затем с помощью мастера добавления классов создать класс, производный от `CDialog` .

Диалоговое окно, как и любое другое окно, получает сообщения из Windows. В диалоговом окне вы особенно заинтересованы в обработке сообщений с уведомлениями от элементов управления диалогового окна, так как это происходит при взаимодействии пользователя с диалоговым окном. Используйте [мастер классов](mfc-class-wizard.md) , чтобы выбрать сообщения, которые нужно обменять, и добавить в класс соответствующие записи схемы сообщений и функции-члены обработчика сообщений. В функциях-членах обработчика необходимо написать только код для конкретного приложения.

При желании вы всегда можете записывать записи схемы сообщений и функции-члены вручную.

Во всех случаях, кроме наиболее тривиального диалогового окна, в производный класс диалогового окна добавляются переменные члена для хранения данных, вводимых в элементы управления диалогового окна пользователем, или для вывода данных для пользователя. С помощью мастера добавления переменной можно создавать переменные элементов и связывать их с элементами управления. В то же время вы выбираете тип переменной и допустимый диапазон значений для каждой переменной. Мастер кода добавляет переменные члена в производный класс диалогового окна.

Создается сопоставление данных, которое автоматически обрабатывает обмен данными между переменными-членом и элементами управления диалогового окна. В карте данных содержатся функции, которые инициализируют элементы управления в диалоговом окне с соответствующими значениями, извлекают данные и проверяют данные.

Чтобы создать модальное диалоговое окно, создайте объект в стеке с помощью конструктора для производного класса диалогового окна, а затем вызовите, `DoModal` чтобы создать диалоговое окно и его элементы управления. Если вы хотите создать немодальное диалоговое окно, вызовите метод `Create` в конструкторе класса диалогового окна.

Можно также создать шаблон в памяти с помощью структуры данных [длгтемплате](/windows/win32/api/winuser/ns-winuser-dlgtemplate) , как описано в Windows SDK. После создания `CDialog` объекта вызовите [креатеиндирект](#createindirect) , чтобы создать немодальное диалоговое окно, или вызовите метод [инитмодалиндирект](#initmodalindirect) и [DoModal](#domodal) , чтобы создать модальное диалоговое окно.

Схема данных Exchange и проверки записывается в переопределении `CWnd::DoDataExchange` , которое добавляется в новый класс диалогового окна. Дополнительные сведения о функциях Exchange и проверки см. в описании функции членства в [DoDataExchange](../../mfc/reference/cwnd-class.md#dodataexchange) `CWnd` .

Программист и инфраструктура вызывают `DoDataExchange` непрямо через вызов [CWnd:: упдатедата](../../mfc/reference/cwnd-class.md#updatedata).

Платформа вызывает, `UpdateData` когда пользователь нажимает кнопку ОК, чтобы закрыть модальное диалоговое окно. (При нажатии кнопки Отмена данные не извлекаются.) Реализация [онинитдиалог](#oninitdialog) по умолчанию также вызывает метод `UpdateData` для установки начальных значений элементов управления. Обычно переопределяется `OnInitDialog` для дальнейшей инициализации элементов управления. `OnInitDialog`вызывается после создания всех элементов управления диалогового окна и непосредственно перед отображением диалогового окна.

Вы можете вызвать `CWnd::UpdateData` в любое время во время выполнения модального или немодального диалогового окна.

Если диалоговое окно разрабатывается вручную, необходимо добавить необходимые переменные-члены в производный класс диалогового окна, а также добавить функции-члены для установки или получения этих значений.

Модальное диалоговое окно закрывается автоматически при нажатии пользователем кнопок ОК или Отмена или когда код вызывает `EndDialog` функцию-член.

При реализации немодального диалогового окна всегда переопределяйте `OnCancel` функцию-член и вызовите `DestroyWindow` ее из нее. Не вызывайте базовый класс `CDialog::OnCancel` , поскольку он вызывает метод `EndDialog` , который сделает диалоговое окно невидимым, но не уничтожит его. Необходимо также переопределить `PostNcDestroy` для немодальных диалоговых окон, чтобы удалить **`this`** , поскольку немодальные диалоговые окна обычно выделяются с помощью **`new`** . Модальные диалоговые окна обычно создаются на фрейме и не требуют `PostNcDestroy` очистки.

Дополнительные сведения о см `CDialog` . в разделе [диалоговые окна](../../mfc/dialog-boxes.md).

## <a name="inheritance-hierarchy"></a>Иерархия наследования

[CObject](../../mfc/reference/cobject-class.md)

[CCmdTarget](../../mfc/reference/ccmdtarget-class.md)

[CWnd](../../mfc/reference/cwnd-class.md)

`CDialog`

## <a name="requirements"></a>Требования

**Заголовок:** afxwin.h

## <a name="cdialogcdialog"></a><a name="cdialog"></a>CDialog:: CDialog

Чтобы создать модальное диалоговое окно на основе ресурса, вызовите либо открытую форму конструктора.

```
explicit CDialog(
    LPCTSTR lpszTemplateName,
    CWnd* pParentWnd = NULL);

explicit CDialog(
    UINT nIDTemplate,
    CWnd* pParentWnd = NULL);

CDialog();
```

### <a name="parameters"></a>Параметры

*лпсзтемплатенаме*<br/>
Содержит строку, завершающуюся нулем, которая является именем ресурса шаблона диалогового окна.

*нидтемплате*<br/>
Содержит ИДЕНТИФИКАЦИОНный номер ресурса шаблона диалогового окна.

*ппарентвнд*<br/>
Указывает на родительский элемент или объект окна-владельца (типа [CWnd](../../mfc/reference/cwnd-class.md)), которому принадлежит объект диалогового окна. Если значение равно NULL, то родительское окно объекта диалогового окна устанавливается в главное окно приложения.

### <a name="remarks"></a>Примечания

Одна форма конструктора предоставляет доступ к ресурсу диалогового окна по имени шаблона. Другой конструктор предоставляет доступ по ИДЕНТИФИКАТОРу шаблона, обычно с префиксом **IDD_** (например, IDD_DIALOG1).

Чтобы создать модальное диалоговое окно из шаблона в памяти, сначала нужно вызвать защищенный конструктор без параметров, а затем вызвать `InitModalIndirect` .

После создания модального диалогового окна с одним из приведенных выше методов вызовите `DoModal` .

Чтобы создать немодальное диалоговое окно, используйте защищенную форму `CDialog` конструктора. Конструктор защищен, так как для реализации немодального диалогового окна необходимо создать собственный класс диалогового окна. Создание немодального диалогового окна — это двухэтапный процесс. Сначала вызовите конструктор. затем вызовите `Create` функцию-член для создания диалогового окна на основе ресурсов или вызовите метод, `CreateIndirect` чтобы создать диалоговое окно из шаблона в памяти.

## <a name="cdialogcreate"></a><a name="create"></a>CDialog:: Create

Вызовите `Create` , чтобы создать немодальное диалоговое окно с помощью шаблона диалогового окна из ресурса.

```
virtual BOOL Create(
    LPCTSTR lpszTemplateName,
    CWnd* pParentWnd = NULL);

virtual BOOL Create(
    UINT nIDTemplate,
    CWnd* pParentWnd = NULL);
```

### <a name="parameters"></a>Параметры

*лпсзтемплатенаме*<br/>
Содержит строку, завершающуюся нулем, которая является именем ресурса шаблона диалогового окна.

*ппарентвнд*<br/>
Указывает на объект родительского окна (типа [CWnd](../../mfc/reference/cwnd-class.md)), которому принадлежит объект диалогового окна. Если значение равно NULL, то родительское окно объекта диалогового окна устанавливается в главное окно приложения.

*нидтемплате*<br/>
Содержит ИДЕНТИФИКАЦИОНный номер ресурса шаблона диалогового окна.

### <a name="return-value"></a>Возвращаемое значение

Обе формы возвращают ненулевое значение, если создание диалогового окна и инициализация завершились успешно; в противном случае — 0.

### <a name="remarks"></a>Примечания

Можно вставить вызов в `Create` конструктор или вызвать его после вызова конструктора.

Две формы функции- `Create` члена предоставляются для доступа к ресурсу шаблона диалогового окна по имени шаблона или идентификационному номеру шаблона (например, IDD_DIALOG1).

Для любой из форм передайте указатель на объект родительского окна. Если *ппарентвнд* имеет значение null, диалоговое окно будет создано с родительским окном или окном-владельцем, заданным в главном окне приложения.

`Create`Функция – член возвращает сразу после создания диалогового окна.

Используйте стиль WS_VISIBLE в шаблоне диалогового окна, если диалоговое окно должно появиться при создании родительского окна. В противном случае необходимо вызвать `ShowWindow` . Дополнительные стили диалоговых окон и их приложения см. в структуре [длгтемплате](/windows/win32/api/winuser/ns-winuser-dlgtemplate) в разделе стили Windows SDK и [окна](../../mfc/reference/styles-used-by-mfc.md#window-styles) в *справочнике по MFC*.

Используйте `CWnd::DestroyWindow` функцию для уничтожения диалогового окна, созданного `Create` функцией.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCControlLadenDialog#62](../../mfc/codesnippet/cpp/cdialog-class_1.cpp)]

## <a name="cdialogcreateindirect"></a><a name="createindirect"></a>CDialog:: Креатеиндирект

Вызовите эту функцию-член, чтобы создать немодальное диалоговое окно из шаблона диалогового окна в памяти.

```
virtual BOOL CreateIndirect(
    LPCDLGTEMPLATE lpDialogTemplate,
    CWnd* pParentWnd = NULL,
    void* lpDialogInit = NULL);

virtual BOOL CreateIndirect(
    HGLOBAL hDialogTemplate,
    CWnd* pParentWnd = NULL);
```

### <a name="parameters"></a>Параметры

*лпдиалогтемплате*<br/>
Указывает на память, содержащую шаблон диалогового окна, используемый для создания диалогового окна. Этот шаблон представлен в виде структуры [длгтемплате](/windows/win32/api/winuser/ns-winuser-dlgtemplate) и управления данными, как описано в Windows SDK.

*ппарентвнд*<br/>
Указывает на родительский объект Window объекта диалогового окна (типа [CWnd](../../mfc/reference/cwnd-class.md)). Если значение равно NULL, то родительское окно объекта диалогового окна устанавливается в главное окно приложения.

*лпдиалогинит*<br/>
Указывает на ресурс ДЛГИНИТ.

*хдиалогтемплате*<br/>
Содержит маркер глобальной памяти, содержащей шаблон диалогового окна. Этот шаблон имеет форму `DLGTEMPLATE` структуры и данных для каждого элемента управления в диалоговом окне.

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение, если диалоговое окно было создано и инициализировано успешно; в противном случае — 0.

### <a name="remarks"></a>Примечания

`CreateIndirect`Функция – член возвращает сразу после создания диалогового окна.

Используйте стиль WS_VISIBLE в шаблоне диалогового окна, если диалоговое окно должно появиться при создании родительского окна. В противном случае необходимо вызвать метод, `ShowWindow` чтобы он отображался. Дополнительные сведения о том, как можно указать другие стили диалоговых окон в шаблоне, см. в разделе Структура [длгтемплате](/windows/win32/api/winuser/ns-winuser-dlgtemplate) в Windows SDK.

Используйте `CWnd::DestroyWindow` функцию для уничтожения диалогового окна, созданного `CreateIndirect` функцией.

Для диалоговых окон, содержащих элементы управления ActiveX, требуются дополнительные сведения, предоставляемые в ресурсе ДЛГИНИТ.

## <a name="cdialogdomodal"></a><a name="domodal"></a>CDialog::D Омодал

Вызовите эту функцию-член, чтобы вызвать модальное диалоговое окно и вернуть результат диалогового окна по завершении.

```
virtual INT_PTR DoModal();
```

### <a name="return-value"></a>Возвращаемое значение

**`int`** Значение типа, указывающее значение параметра *nрезультат* , переданного в функцию-член [CDialog:: EndDialog](#enddialog) , которая используется для закрытия диалогового окна. Возвращаемое значение равно-1, если функция не может создать диалоговое окно или ИДАБОРТ, если произошла какая-либо другая ошибка. в этом случае окно вывода будет содержать сведения об ошибке из [GetLastError](/windows/win32/api/errhandlingapi/nf-errhandlingapi-getlasterror).

### <a name="remarks"></a>Примечания

Эта функция-член обрабатывает все взаимодействия с пользователем, пока диалоговое окно активно. Именно это делает диалоговое окно модальным; то есть пользователь не может взаимодействовать с другими окнами, пока диалоговое окно не закроется.

Если пользователь нажимает одну из кнопок в диалоговом окне, например ОК или Отмена, вызывается функция-член обработчика сообщений, например [ОНОК](#onok) или [OnCancel](#oncancel), для попыток закрыть диалоговое окно. Функция-член по умолчанию `OnOK` проверит и обновит данные диалогового окна и закроет диалоговое окно с результатом идок, а функция-член по умолчанию `OnCancel` закроет диалоговое окно с результатом идканцел без проверки или обновления данных диалогового окна. Эти функции обработчика сообщений можно переопределить для изменения их поведения.

> [!NOTE]
> `PreTranslateMessage`теперь вызывается для обработки сообщений модального диалогового окна.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCControlLadenDialog#63](../../mfc/codesnippet/cpp/cdialog-class_2.cpp)]

## <a name="cdialogenddialog"></a><a name="enddialog"></a>CDialog:: EndDialog

Вызовите эту функцию-член для завершения модального диалогового окна.

```cpp
void EndDialog(int nResult);
```

### <a name="parameters"></a>Параметры

*Nрезультат*<br/>
Содержит значение, возвращаемое из диалогового окна вызывающему объекту `DoModal` .

### <a name="remarks"></a>Примечания

Эта функция – член возвращает *nрезультат* в качестве возвращаемого значения `DoModal` . `EndDialog`Для завершения обработки при создании модального диалогового окна необходимо использовать функцию.

Вы можете вызвать в `EndDialog` любое время, даже в [онинитдиалог](#oninitdialog). в этом случае следует закрыть диалоговое окно до его отображения или до установки фокуса ввода.

`EndDialog`не закрывает диалоговое окно немедленно. Вместо этого он устанавливает флаг, указывающий, что диалоговое окно закрывается, как только будет возвращен текущий обработчик сообщений.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCControlLadenDialog#64](../../mfc/codesnippet/cpp/cdialog-class_3.cpp)]

[!code-cpp[NVC_MFCControlLadenDialog#65](../../mfc/codesnippet/cpp/cdialog-class_4.cpp)]

## <a name="cdialoggetdefid"></a><a name="getdefid"></a>CDialog:: Жетдефид

Вызовите `GetDefID` функцию-член, чтобы получить идентификатор элемента управления "Кнопка" по умолчанию для диалогового окна.

```
DWORD GetDefID() const;
```

### <a name="return-value"></a>Возвращаемое значение

32-разрядное значение ( `DWORD` ). Если кнопка по умолчанию имеет значение ID, то слово с высоким порядком содержит DC_HASDEFID, а младшее слово содержит значение идентификатора. Если кнопка по умолчанию не имеет значения ID, возвращается значение 0.

### <a name="remarks"></a>Примечания

Обычно это кнопка ОК.

## <a name="cdialoggotodlgctrl"></a><a name="gotodlgctrl"></a>CDialog:: Готодлгктрл

Перемещает фокус на указанный элемент управления в диалоговом окне.

```cpp
void GotoDlgCtrl(CWnd* pWndCtrl);
```

### <a name="parameters"></a>Параметры

*пвндктрл*<br/>
Определяет окно (элемент управления), получающее фокус.

### <a name="remarks"></a>Примечания

Чтобы получить указатель на элемент управления (дочернее окно) для передачи в виде *пвндктрл*, вызовите `CWnd::GetDlgItem` функцию-член, которая возвращает указатель на объект [CWnd](../../mfc/reference/cwnd-class.md) .

### <a name="example"></a>Пример

  См. пример для [CWnd:: жетдлгитем](../../mfc/reference/cwnd-class.md#getdlgitem).

## <a name="cdialoginitmodalindirect"></a><a name="initmodalindirect"></a>CDialog:: Инитмодалиндирект

Вызовите эту функцию-член для инициализации модального диалогового объекта с помощью шаблона диалогового окна, создаваемого в памяти.

```
BOOL InitModalIndirect(
    LPCDLGTEMPLATE lpDialogTemplate,
    CWnd* pParentWnd = NULL,
    void* lpDialogInit = NULL);

    BOOL InitModalIndirect(
    HGLOBAL hDialogTemplate,
    CWnd* pParentWnd = NULL);
```

### <a name="parameters"></a>Параметры

*лпдиалогтемплате*<br/>
Указывает на память, содержащую шаблон диалогового окна, используемый для создания диалогового окна. Этот шаблон представлен в виде структуры [длгтемплате](/windows/win32/api/winuser/ns-winuser-dlgtemplate) и управления данными, как описано в Windows SDK.

*хдиалогтемплате*<br/>
Содержит маркер глобальной памяти, содержащей шаблон диалогового окна. Этот шаблон имеет форму `DLGTEMPLATE` структуры и данных для каждого элемента управления в диалоговом окне.

*ппарентвнд*<br/>
Указывает на родительский элемент или объект окна-владельца (типа [CWnd](../../mfc/reference/cwnd-class.md)), которому принадлежит объект диалогового окна. Если значение равно NULL, то родительское окно объекта диалогового окна устанавливается в главное окно приложения.

*лпдиалогинит*<br/>
Указывает на ресурс ДЛГИНИТ.

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение, если объект диалогового окна был создан и инициализирован успешно; в противном случае — 0.

### <a name="remarks"></a>Примечания

Чтобы создать модальное диалоговое окно, сначала выделите глобальный блок памяти и заполните его шаблоном диалогового окна. Затем вызовите пустой `CDialog` конструктор для создания объекта диалогового окна. Затем вызовите функцию, `InitModalIndirect` чтобы сохранить ваш обработчик в шаблон диалогового окна в памяти. Диалоговое окно Windows создается и отображается позже при вызове функции-члена [DoModal](#domodal) .

Для диалоговых окон, содержащих элементы управления ActiveX, требуются дополнительные сведения, предоставляемые в ресурсе ДЛГИНИТ.

## <a name="cdialogmapdialogrect"></a><a name="mapdialogrect"></a>CDialog:: Мапдиалогрект

Вызов для преобразования единиц диалогового окна прямоугольника в единицы экрана.

```cpp
void MapDialogRect(LPRECT lpRect) const;
```

### <a name="parameters"></a>Параметры

*лпрект*<br/>
Указывает на структуру [Rect](/windows/win32/api/windef/ns-windef-rect) или объект [крект](../../atl-mfc-shared/reference/crect-class.md) , содержащий координаты диалогового окна для преобразования.

### <a name="remarks"></a>Примечания

Единицы диалоговых окон задаются в терминах текущей базовой единицы диалогового окна, производной от средней ширины и высоты символов шрифта, используемого для текста диалогового окна. Одна горизонтальная единица — это одна четвертая единица базовой ширины диалогового окна, а одна единица по вертикали — одна восьмая от базовой единицы высоты диалогового окна.

`GetDialogBaseUnits`Функция Windows возвращает сведения о размере системного шрифта, но при использовании стиля DS_SETFONT в файле определения ресурсов можно указать другой шрифт для каждого диалогового окна. `MapDialogRect`Функция Windows использует для этого диалогового окна соответствующий шрифт.

`MapDialogRect`Функция-член заменяет единицы диалогового окна в *лпрект* с помощью единиц экрана (пикселей), чтобы прямоугольник можно было использовать для создания диалогового окна или размещения элемента управления в поле.

## <a name="cdialognextdlgctrl"></a><a name="nextdlgctrl"></a>CDialog:: Некстдлгктрл

Перемещает фокус на следующий элемент управления в диалоговом окне.

```cpp
void NextDlgCtrl() const;
```

### <a name="remarks"></a>Примечания

Если фокус находится на последнем элементе управления в диалоговом окне, он перемещается к первому элементу управления.

## <a name="cdialogoncancel"></a><a name="oncancel"></a>CDialog:: OnCancel

Платформа вызывает этот метод, когда пользователь нажимает кнопку **"Отмена"** или нажимает клавишу ESC в модальном или немодальном диалоговом окне.

```
virtual void OnCancel();
```

### <a name="remarks"></a>Примечания

Переопределите этот метод, чтобы выполнять действия (например, восстановление старых данных), когда пользователь закрывает диалоговое окно, нажав кнопку **Отмена** или клавиши ESC. По умолчанию модальное диалоговое окно закрывается вызовом [EndDialog](#enddialog) и вызывается [DOMODAL](#domodal) для возвращения идканцел.

При реализации кнопки **Отмена** в немодальном диалоговом окне необходимо переопределить `OnCancel` метод и вызвать [дестройвиндов](../../mfc/reference/cwnd-class.md#destroywindow) внутри него. Не вызывайте метод базового класса, так как он вызывает `EndDialog` , что сделает диалоговое окно невидимым, но не уничтожает его.

> [!NOTE]
> Этот метод нельзя переопределить при использовании `CFileDialog` объекта в программе, компилируемой в Windows XP. Дополнительные сведения о см `CFileDialog` . в разделе [класс CFileDialog](../../mfc/reference/cfiledialog-class.md).

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCControlLadenDialog#66](../../mfc/codesnippet/cpp/cdialog-class_5.cpp)]

## <a name="cdialogoninitdialog"></a><a name="oninitdialog"></a>CDialog:: Онинитдиалог

Этот метод вызывается в ответ на `WM_INITDIALOG` сообщение.

```
virtual BOOL OnInitDialog();
```

### <a name="return-value"></a>Возвращаемое значение

Указывает, было ли приложение установило фокус ввода на один из элементов управления в диалоговом окне. Если `OnInitDialog` возвращает ненулевое значение, Windows устанавливает фокус ввода на расположение по умолчанию — первый элемент управления в диалоговом окне. Приложение может вернуть значение 0 только в том случае, если оно явно установило фокус ввода на один из элементов управления в диалоговом окне.

### <a name="remarks"></a>Примечания

Windows отправляет `WM_INITDIALOG` сообщение в диалоговое окно во время вызовов [CREATE](#create), [креатеиндирект](#createindirect)или [DoModal](#domodal) , которое происходит непосредственно перед отображением диалогового окна.

Переопределите этот метод, если требуется выполнить специальную обработку при инициализации диалогового окна. В переопределенной версии сначала вызовите базовый класс, `OnInitDialog` но не проигнорируйте его возвращаемое значение. Как правило, возвращается `TRUE` из переопределенного метода.

Windows вызывает `OnInitDialog` функцию, используя стандартную процедуру глобального диалогового окна, общую для всех Библиотека Microsoft Foundation Class диалоговых окон. Она не вызывает эту функцию через схему сообщений, поэтому для этого метода не требуется запись схемы сообщений.

> [!NOTE]
> Этот метод нельзя переопределить при использовании `CFileDialog` объекта в программе, скомпилированной в Windows Vista или более поздних операционных системах. Дополнительные сведения об изменениях в `CFileDialog` Windows Vista и более поздних версиях см. в разделе [класс CFileDialog](../../mfc/reference/cfiledialog-class.md).

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCControlLadenDialog#67](../../mfc/codesnippet/cpp/cdialog-class_6.cpp)]

## <a name="cdialogonok"></a><a name="onok"></a>CDialog:: ОНОК

Вызывается, когда пользователь нажимает кнопку " **ОК** " (кнопка с идентификатором идок).

```
virtual void OnOK();
```

### <a name="remarks"></a>Примечания

Переопределите этот метод для выполнения действий при активации кнопки **ОК** . Если диалоговое окно включает автоматическую проверку данных и Exchange, реализация по умолчанию этого метода проверяет данные диалогового окна и обновляет соответствующие переменные в приложении.

При реализации кнопки **ОК** в немодальном диалоговом окне необходимо переопределить `OnOK` метод и вызвать [дестройвиндов](../../mfc/reference/cwnd-class.md#destroywindow) внутри него. Не вызывайте метод базового класса, так как он вызывает [EndDialog](#enddialog) , что делает диалоговое окно невидимым, но не уничтожает его.

> [!NOTE]
> Этот метод нельзя переопределить при использовании `CFileDialog` объекта в программе, компилируемой в Windows XP. Дополнительные сведения о см `CFileDialog` . в разделе [класс CFileDialog](../../mfc/reference/cfiledialog-class.md).

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCControlLadenDialog#68](../../mfc/codesnippet/cpp/cdialog-class_7.cpp)]

## <a name="cdialogonsetfont"></a><a name="onsetfont"></a>CDialog:: Онсетфонт

Задает шрифт, который будет использоваться элементом управления "диалоговое окно" при рисовании текста.

```
Virtual void OnSetFont(CFont* pFont);
```

### <a name="parameters"></a>Параметры

*пфонт*<br/>
окне Задает указатель на шрифт, который будет использоваться в качестве шрифта по умолчанию для всех элементов управления в этом диалоговом окне.

### <a name="remarks"></a>Примечания

В диалоговом окне будет использоваться указанный шрифт по умолчанию для всех элементов управления.

Редактор диалоговых окон обычно задает шрифт диалогового окна как часть ресурса шаблона диалогового окна.

> [!NOTE]
> Этот метод нельзя переопределить при использовании `CFileDialog` объекта в программе, скомпилированной в Windows Vista или более поздних операционных системах. Дополнительные сведения об изменениях в `CFileDialog` Windows Vista и более поздних версиях см. в разделе [класс CFileDialog](../../mfc/reference/cfiledialog-class.md).

## <a name="cdialogprevdlgctrl"></a><a name="prevdlgctrl"></a>CDialog::P Ревдлгктрл

Устанавливает фокус на предыдущий элемент управления в диалоговом окне.

```cpp
void PrevDlgCtrl() const;
```

### <a name="remarks"></a>Примечания

Если фокус находится на первом элементе управления в диалоговом окне, он переходит к последнему элементу управления в поле.

## <a name="cdialogsetdefid"></a><a name="setdefid"></a>CDialog:: Сетдефид

Изменяет элемент управления "Кнопка" по умолчанию для диалогового окна.

```cpp
void SetDefID(UINT nID);
```

### <a name="parameters"></a>Параметры

*nID*<br/>
Указывает идентификатор элемента управления "Кнопка", который станет значением по умолчанию.

## <a name="cdialogsethelpid"></a><a name="sethelpid"></a>CDialog:: Сеселпид

Задает контекстно-зависимый идентификатор справки для диалогового окна.

```cpp
void SetHelpID(UINT nIDR);
```

### <a name="parameters"></a>Параметры

*нидр*<br/>
Задает контекстно-зависимый идентификатор справки.

## <a name="see-also"></a>См. также раздел

[Пример DLGCBR32 для MFC](../../overview/visual-cpp-samples.md)<br/>
[Пример ДЛГТЕМПЛ для MFC](../../overview/visual-cpp-samples.md)<br/>
[CWnd, класс](../../mfc/reference/cwnd-class.md)<br/>
[Иерархическая диаграмма](../../mfc/hierarchy-chart.md)
