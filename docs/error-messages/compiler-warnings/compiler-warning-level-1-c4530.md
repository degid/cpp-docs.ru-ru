---
title: Предупреждение компилятора (уровень 1) C4530
description: Справочное руководство по компилятору Microsoft C++ Warning C4530.
ms.date: 04/02/2020
f1_keywords:
- C4530
helpviewer_keywords:
- C4530
ms.assetid: a04dcdb2-84db-459d-9e5e-4e743887465f
ms.openlocfilehash: fe0a2b4c8eb881327f3e59d66e7e6941f0a2cad8
ms.sourcegitcommit: 1f009ab0f2cc4a177f2d1353d5a38f164612bdb1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/27/2020
ms.locfileid: "87230666"
---
# <a name="compiler-warning-level-1-c4530"></a>Предупреждение компилятора (уровень 1) C4530

> Использован обработчик исключений C++, но семантика очистки не включена. Укажите/EHsc

Код использует обработку исключений C++, но метод [/EHsc](../../build/reference/eh-exception-handling-model.md) не был добавлен в параметры компилятора.

## <a name="remarks"></a>Примечания

Компилятору требуется **`/EHsc`** возможность построения кода c++, который соответствует стандарту c++ для обработки исключений. Стандартная *семантика очистки* C++ указывает, что объекты и кадры стека, созданные между местом создания исключения и их перехватом, должны быть уничтожены и восстановлены их ресурсы. Этот процесс называется *сбросом стека*.

**`/EHsc`** Параметр указывает компилятору создавать код, который вызывает деструкторы для автоматических объектов хранилища, когда исключение проходит через содержащий его кадр стека. Объекты *автоматического хранения* — это объекты, выделенные в стеке, например локальные переменные. Он называется автоматическим хранилищем, так как он выделяется автоматически при вызове функций и автоматически освобождается при возврате. *Кадр стека* — это данные, помещаемые в стек при вызове функции вместе с автоматическим хранилищем.

При возникновении исключения оно может перемещаться по нескольким кадрам стека перед его перехватом. Эти кадры стека должны быть развернуты, так как исключение проходит через них в порядке обратный вызов. Объекты автоматического хранения в каждом кадре стека должны быть уничтожены для чистого восстановления ресурсов. Это тот же процесс уничтожения и восстановления, который происходит автоматически, когда функция возвращается в обычном режиме.

Если **`/EHsc`** параметр не включен, автоматические объекты хранения в кадрах стека между вызываемой функцией и функцией, в которой перехвачено исключение, не уничтожаются. Только автоматические объекты хранилища, созданные в **`try`** **`catch`** блоке или, уничтожаются, что может привести к значительным утечкам ресурсов и возникновению других непредвиденных поведений.

Если в исполняемом файле не могут быть созданы исключения, вы можете спокойно проигнорировать это предупреждение. Для некоторых кодов могут потребоваться другие варианты обработки исключений. Дополнительные сведения см. в разделе [/EH](../../build/reference/eh-exception-handling-model.md).

## <a name="example"></a>Пример

Следующий пример приводит к возникновению ошибки C4530:

```cpp
// C4530.cpp
// compile with: /W1
int main() {
   try{} catch(int*) {}   // C4530
}
```

Скомпилируйте пример с, **`/EHsc`** чтобы устранить предупреждение.
