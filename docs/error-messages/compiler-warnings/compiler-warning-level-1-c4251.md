---
title: Предупреждение компилятора (уровень 1) C4251
ms.date: 04/21/2020
f1_keywords:
- C4251
helpviewer_keywords:
- C4251
ms.assetid: a9992038-f0c2-4fc4-a9be-4509442cbc1e
ms.openlocfilehash: 9f261d3deb7f1cac8cd5c60b920e0be49bc8b7a6
ms.sourcegitcommit: 89d9e1cb08fa872483d1cde98bc2a7c870e505e9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/22/2020
ms.locfileid: "82032334"
---
# <a name="compiler-warning-level-1-c4251"></a>Предупреждение компилятора (уровень 1) C4251

> '*тип*' :*тип1*' должен иметь dll-интерфейс, который будет использоваться клиентами класса '*type2*'

## <a name="remarks"></a>Примечания

Чтобы свести к минимуму возможность повреждения данных при экспорте класса, объявленного [__declspec (dllexport),](../../cpp/dllexport-dllimport.md)убедитесь, что:

- Все ваши статические данные доступны через функции, которые экспортируются из DLL.

- Никакие встроенные методы вашего класса не могут изменять статические данные.

- Никакие встроенные методы вашего класса не используют функции CRT или другие библиотечные функции, которые используют статические данные. Для получения дополнительной [информации см. Потенциальные ошибки, проходящие объекты CRT через границы DLL.](../../c-runtime-library/potential-errors-passing-crt-objects-across-dll-boundaries.md)

- Никакие методы вашего класса (независимо от того, подстроены или нет) не могут использовать типы, в которых мгновенное значение в EXE и DLL имеет статические различия в данных.

Вы можете избежать проблем при экспорте класса из DLL: Определите свой класс, чтобы иметь виртуальные функции, и функции мгновенного и удаления объектов типа. Затем вы можете просто вызвать виртуальные функции по типу.

C4251 может быть проигнорирован, если ваш класс получен из типа в стандартной библиотеке СЗ, вы компилируете отладку **(/MTd),** и где сообщение об ошибке компилятора относится к `_Container_base`.

## <a name="example"></a>Пример

Этот образец экспортирует специализированный класс, `VecWrapper` полученный из `std::vector`.

```cpp
// C4251.cpp
// compile with: /EHsc /MTd /W2 /c
#include <vector>
using namespace std;
class Node;
class __declspec(dllexport) VecWrapper : vector<Node *> {};   // C4251
```
