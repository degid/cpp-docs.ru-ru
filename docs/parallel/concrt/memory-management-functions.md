---
title: Функции управления памятью
ms.date: 11/04/2016
helpviewer_keywords:
- memory management functions [Concurrency Runtime]
ms.assetid: d303dd2a-dfa4-4d90-a508-f6aa290bb9ea
ms.openlocfilehash: aa1951211283ddf7e4823a920d5cdf19bd6d977d
ms.sourcegitcommit: a8ef52ff4a4944a1a257bdaba1a3331607fb8d0f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/11/2020
ms.locfileid: "77141841"
---
# <a name="memory-management-functions"></a>Функции управления памятью

В этом документе описываются функции управления памятью, предоставляемые среда выполнения с параллелизмом, позволяющие одновременно распределять и освобождать память.

> [!TIP]
> Среда выполнения с параллелизмом предоставляет планировщик по умолчанию, и таким образом не требуется создавать планировщик в приложении. Поскольку планировщик задач помогает точно настроить производительность приложений, рекомендуется начать с [библиотеки параллельных шаблонов (PPL)](../../parallel/concrt/parallel-patterns-library-ppl.md) или [библиотеки асинхронных агентов](../../parallel/concrt/asynchronous-agents-library.md) , если вы не знакомы с среда выполнения с параллелизмом.

Среда выполнения с параллелизмом предоставляет две функции управления памятью, оптимизированные для одновременного выделения и освобождения блоков памяти. Функция [concurrency::Alloc](reference/concurrency-namespace-functions.md#alloc) выделяет блок памяти, используя указанный размер. Функция [concurrency::Free](reference/concurrency-namespace-functions.md#free) освобождает память, выделенную `Alloc`.

> [!NOTE]
> Функции `Alloc` и `Free` зависят друг от друга. Используйте функцию `Free` только для освобождения памяти, выделенной с помощью функции `Alloc`. Кроме того, при использовании функции `Alloc` для выделения памяти используйте только функцию `Free` для освобождения этой памяти.

Используйте функции `Alloc` и `Free` при выделении и освобождении фиксированного набора размеров выделения из разных потоков или задач. Среда выполнения с параллелизмом кэширует память, выделенную ей из кучи среды выполнения C. Среда выполнения с параллелизмом содержит отдельный кэш памяти для каждого выполняющегося потока; Таким образом, среда выполнения управляет памятью без использования блокировок или барьеров памяти. Приложение имеет больше преимуществ `Alloc` и `Free` при частом доступе к кэшу памяти. Например, поток, который часто вызывает и `Alloc`, и `Free` выгоднее, чем поток, который в основном вызывает `Alloc` или `Free`.

> [!NOTE]
> Если вы используете эти функции управления памятью и ваше приложение использует много памяти, приложение может ввести условие нехватки памяти быстрее, чем вы ждете. Поскольку блоки памяти, кэшированные одним потоком, недоступны для любого другого потока, в случае, если один поток удерживает много памяти, эта память недоступна.

## <a name="example"></a>Пример

Пример использования функций `Alloc` и `Free` для повышения производительности памяти см. в разделе [как использовать Alloc и Free для повышения производительности памяти](../../parallel/concrt/how-to-use-alloc-and-free-to-improve-memory-performance.md).

## <a name="see-also"></a>См. также раздел

[Планировщик заданий](../../parallel/concrt/task-scheduler-concurrency-runtime.md)<br/>
[Практическое руководство. Использование функций Alloc и Free для повышения производительности операций с памятью](../../parallel/concrt/how-to-use-alloc-and-free-to-improve-memory-performance.md)
