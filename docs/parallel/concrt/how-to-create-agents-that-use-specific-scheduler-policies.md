---
title: Практическое руководство. Создание агентов, использующих определенные политики планировщика
ms.date: 11/04/2016
helpviewer_keywords:
- scheduler policies, agents [Concurrency Runtime]
- creating agents that use specific policies [Concurrency Runtime]
ms.assetid: 46a3e265-0777-4ec3-a142-967bafc49d67
ms.openlocfilehash: ece6b113e3fe10c2c3179517f73137df281acf87
ms.sourcegitcommit: a8ef52ff4a4944a1a257bdaba1a3331607fb8d0f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/11/2020
ms.locfileid: "77141735"
---
# <a name="how-to-create-agents-that-use-specific-scheduler-policies"></a>Практическое руководство. Создание агентов, использующих определенные политики планировщика

Агент — это компонент приложения, который работает асинхронно с другими компонентами для решения больших вычислительных задач. Агент обычно имеет заданный жизненный цикл и сохраняет состояние.

Каждый агент может иметь уникальные требования к приложениям. Например, агент, который обеспечивает взаимодействие с пользователем (извлечение входных данных или Отображение выходных данных), может потребовать более высокого приоритета доступа к вычислительным ресурсам. Политики планировщика позволяют управлять стратегией, которую планировщик использует при управлении задачами. В этом разделе показано, как создавать агенты, использующие определенные политики планировщика.

Простой пример использования пользовательских политик планировщика вместе с асинхронными блоками сообщений см. [в разделе как указать конкретные политики планировщика](../../parallel/concrt/how-to-specify-specific-scheduler-policies.md).

В этом разделе для выполнения работы используются функции из библиотеки асинхронных агентов, такие как агенты, блоки сообщений и функции передачи сообщений. Дополнительные сведения о библиотеке асинхронных агентов см. в разделе [Библиотека асинхронных агентов](../../parallel/concrt/asynchronous-agents-library.md).

## <a name="example"></a>Пример

В следующем примере определяются два класса, производных от [concurrency::Agent](../../parallel/concrt/reference/agent-class.md): `permutor` и `printer`. `permutor` класс выполняет вычисление всех перестановок заданной входной строки. Класс `printer` выводит сообщения о ходе выполнения на консоль. Класс `permutor` выполняет операцию с интенсивным использованием вычислений, которая может использовать все доступные вычислительные ресурсы. Чтобы быть полезным, класс `printer` должен своевременно выводить каждое сообщение о ходе выполнения.

Чтобы предоставить `printer` классу адекватный доступ к вычислительным ресурсам, в этом примере используются шаги, описанные в разделе [Управление экземпляром планировщика](../../parallel/concrt/how-to-manage-a-scheduler-instance.md) для создания экземпляра планировщика с настраиваемой политикой. Настраиваемая политика задает приоритет потока в качестве класса с наивысшим приоритетом.

Чтобы продемонстрировать преимущества использования планировщика, имеющего настраиваемую политику, этот пример выполняет общую задачу два раза. В примере сначала используется планировщик по умолчанию для планирования обеих задач. Затем в примере используется планировщик по умолчанию для планирования объекта `permutor` и планировщик с настраиваемой политикой для планирования объекта `printer`.

[!code-cpp[concrt-permute-strings#1](../../parallel/concrt/codesnippet/cpp/how-to-create-agents-that-use-specific-scheduler-policies_1.cpp)]

В этом примере формируются следующие данные:

```Output
With default scheduler:
Computing all permutations of 'Grapefruit'...
100% complete...

With higher context priority:
Computing all permutations of 'Grapefruit'...
100% complete...
```

Несмотря на то, что оба набора задач дают одинаковый результат, версия, использующая настраиваемую политику, позволяет объекту `printer` выполняться с повышенным приоритетом, чтобы обеспечить более высокую скорость реагирования.

## <a name="compiling-the-code"></a>Компиляция кода

Скопируйте пример кода и вставьте его в проект Visual Studio или вставьте в файл с именем `permute-strings.cpp`, а затем выполните следующую команду в окне командной строки Visual Studio.

> **CL. exe/EHsc пермуте-стрингс. cpp**

## <a name="see-also"></a>См. также раздел

[Политики планировщика](../../parallel/concrt/scheduler-policies.md)<br/>
[Асинхронные агенты](../../parallel/concrt/asynchronous-agents.md)
