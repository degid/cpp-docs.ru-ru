---
title: Прагма vtordisp
ms.date: 08/29/2019
f1_keywords:
- vc-pragma.vtordisp
- vtordisp_CPP
helpviewer_keywords:
- pragmas, vtordisp
- vtordisp pragma
ms.assetid: 05b7d73c-43fa-4b62-8c8a-170a9e427391
ms.openlocfilehash: a6ffc5c0323389d812e659ff68555a8c8c993126
ms.sourcegitcommit: 1f009ab0f2cc4a177f2d1353d5a38f164612bdb1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/27/2020
ms.locfileid: "87219369"
---
# <a name="vtordisp-pragma"></a>Прагма vtordisp

**Блок, относящийся только к языку C++**

Управляет добавлением скрытого `vtordisp` элемента смещения создания или уничтожения.

## <a name="syntax"></a>Синтаксис

> **#pragma vtordisp (** [ **Push,** ] *n* **)**\
> **#pragma vtordisp (POP)**\
> **#pragma vtordisp ()**\
> **#pragma vtordisp (** [ **Push,** ] { **On**  |  **Off** } **)**

### <a name="parameters"></a>Параметры

**распространение**\
Помещает текущий `vtordisp` параметр во внутренний стек компилятора и устанавливает `vtordisp` для нового параметра значение *n*.  Если *n* не указан, текущий `vtordisp` параметр не изменяется.

**Рор**\
Удаляет верхнюю запись из внутреннего стека компилятора и восстанавливает `vtordisp` значение удаленного параметра.

*\n*\
Задает новое значение для `vtordisp` параметра. Возможные значения: 0, 1 или 2, соответствующие `/vd0` `/vd1` `/vd2` параметрам компилятора, и. Дополнительные сведения см. в разделе [/ВД (отключение замещения конструкций)](../build/reference/vd-disable-construction-displacements.md).

**on**\
Эквивалент `#pragma vtordisp(1)`.

**автоном**\
Эквивалент `#pragma vtordisp(0)`.

## <a name="remarks"></a>Примечания

Директива pragma **vtordisp** применима только к коду, который использует виртуальные базовые базы. Если в производном классе переопределена виртуальная функция, которую он унаследовал от виртуального базового класса, и если конструктор или деструктор производного класса вызывает эту функцию при помощи указателя на виртуальный базовый класс, то компилятор может вставлять поля `vtordisp` в классы с виртуальными базовыми классами.

Директива pragma **vtordisp** влияет на макет классов, которые следуют за ним. `/vd0`Параметры, `/vd1` и `/vd2` указывают одинаковое поведение для полных модулей. Указание 0 или **Off** подавляет скрытые `vtordisp` члены. Отключите **vtordisp** , только если нет возможности, чтобы конструкторы и деструкторы класса вызывали виртуальные функции для объекта, на который указывает **`this`** указатель.

При указании значения 1 или **On**значение по умолчанию включает скрытые `vtordisp` члены, где это необходимо.

Указание 2 включает скрытые `vtordisp` члены для всех виртуальных баз с виртуальными функциями.  `#pragma vtordisp(2)`может потребоваться обеспечить правильную производительность для **`dynamic_cast`** частично сконструированного объекта. Дополнительные сведения см. в разделе [Предупреждение компилятора (уровень 1) C4436](../error-messages/compiler-warnings/compiler-warning-level-1-c4436.md).

`#pragma vtordisp()`без аргументов восстанавливает `vtordisp` первоначальный параметр.

```cpp
#pragma vtordisp(push, 2)
class GetReal : virtual public VBase { ... };
#pragma vtordisp(pop)
```

**Завершение блока, относящегося только к языку C++**

## <a name="see-also"></a>См. также раздел

[Директивы pragma и ключевое слово __pragma](../preprocessor/pragma-directives-and-the-pragma-keyword.md)
