---
title: Запуск программы NMAKE
description: Справочное руководство по параметрам командной строки Microsoft NMAKE.
ms.date: 02/09/2020
helpviewer_keywords:
- targets, building
- response files, NMAKE
- targets
- command files
- NMAKE program, targets
- NMAKE program, running
- command files, NMAKE
ms.assetid: 0421104d-8b7b-4bf3-86c1-928d9b7c1a8c
ms.openlocfilehash: bfada33a89c04d25bf7444cbf3b1e7ef3ed44385
ms.sourcegitcommit: 7ecd91d8ce18088a956917cdaf3a3565bd128510
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/16/2020
ms.locfileid: "79422778"
---
# <a name="running-nmake"></a>Запуск программы NMAKE

## <a name="syntax"></a>Синтаксис

> **NMAKE** [*параметр* ...] [*макросы* ...] [*Targets* ...] [ **\@** _Командный файл_ ...]

## <a name="remarks"></a>Примечания

NMAKE создает только указанные *целевые объекты* или, если ни один из них не указан, первый целевой объект в файле Makefile. Первый целевой объект Makefile может быть [псеудотаржет](description-blocks.md#pseudotargets) , который создает другие целевые объекты. NMAKE использует файлы Makefile, указанные в параметре **/f**, или если параметр **/f** не указан, файл Makefile в текущем каталоге. Если файл makefile не указан, он использует правила вывода для создания *целевых объектов*командной строки.

Текстовый файл *командного файла* (или файл ответов) содержит входные данные командной строки. Другие входные данные могут предшествовать или следовать \@*командного файла*. Допускается путь. В *командном файле*разрывы строк обрабатываются как пробелы. Заключите определения макросов в кавычки, если они содержат пробелы.

## <a name="nmake-options"></a>Параметры NMAKE

Параметры NMAKE описаны в следующей таблице. Параметрам перед параметрами предшествуют косая черта (`/`) или тире (`-`), без учета регистра. Используйте [`!CMDSWITCHES`](makefile-preprocessing-directives.md) , чтобы изменить настройки параметров в файле makefile или файле Tools. ini.

| Параметр | Назначение |
| ------------ | ------------- |
| **/** | Принудительно выполняет сборку всех оцененных целевых объектов, даже если не устарело по сравнению с зависимыми. Не выполняет принудительную сборку несвязанных целевых объектов. |
| **B** | Принудительно выполняет сборку, даже если метки времени равны. Рекомендуется только для быстрых систем (с разрешением не более двух секунд). |
| **/C** | Подавляет вывод по умолчанию, включая неустранимые ошибки NMAKE или предупреждения, метки времени и сообщение NMAKE Copyright. Подавляет предупреждения, выданные параметром **/k**. |
| **/D** | Отображает метки времени для каждого оцененного целевого объекта и зависимого сообщения, если целевой объект не существует. Используется с параметром **/p** для отладки файла makefile. Используйте `!CMDSWITCHES`, чтобы установить или снять флажок **/d** для части файла makefile. |
| **/E** | Заставляет переменные среды переопределять определения макросов Makefile. |
| **/errorreport** [ **нет** &#124; &#124; **Отправка** **очереди** **запросов** &#124; ] | Не рекомендуется. Параметры управления отчетами [отчеты об ошибках Windows (WER)](/windows/win32/wer/windows-error-reporting) . |
| **/F** *имя файла* | Указывает *имя файла* как файл makefile. Пробелы или символы табуляции могут предшествовать *имени файла*. Для каждого файла makefile задайте параметр **/f** один раз. Чтобы передать файл Makefile из стандартного ввода, укажите тире (`-`) для *имени файла*, а затем введите ввод с клавиатуры с помощью клавиш **F6** или **CTRL + Z**. |
| **/G** | Отображает файлы Makefile, входящие в директиву `!INCLUDE`. Дополнительные сведения см. в статье о [директивах предварительной обработки файлов Makefile](makefile-preprocessing-directives.md). |
| **/Help**, **/?** | Отображает краткую сводку по синтаксису командной строки NMAKE. |
| **/I** | Пропускает коды выхода из всех команд. Чтобы задать или снять **/i** для части файла makefile, используйте `!CMDSWITCHES`. Чтобы игнорировать коды выхода для части файла makefile, используйте`-`модификатор команды или [`.IGNORE`](dot-directives.md). Переопределяет параметр **/k** , если указаны оба значения. |
| **/K** | Продолжение сборки несвязанных зависимостей, если команда возвращает ошибку. Также выдает предупреждение и возвращает код выхода 1. По умолчанию NMAKE останавливается, если какая-либо команда возвращает ненулевой код выхода. Предупреждения от **/k** подавляются с помощью **/c**; **/I** переопределяет параметр **/k** , если указаны оба значения. |
| **Параметра** | Отображает, но не выполняет команды. выполняются команды предварительной обработки. Не отображает команды в рекурсивных вызовах NMAKE. Полезно для отладки файлов Makefile и проверки меток времени. Чтобы установить или снять **/n** для части файла makefile, используйте `!CMDSWITCHES`. |
| **/NOLOGO** | Подавляет сообщение об авторском праве NMAKE. |
| **/P** | Отображает сведения (определения макросов, правила вывода, цели, [`.SUFFIXES`](dot-directives.md) список) для стандартного вывода, а затем запускает сборку. Если файл makefile или целевой объект командной строки не существует, он отображает только сведения. Используйте параметр WITH **/d** для отладки файла makefile. |
| **/Q** | Проверяет отметки времени целевых объектов; не выполняет сборку. Возвращает нулевой код выхода, если все целевые объекты актуальны, и ненулевой код выхода, если какой-либо целевой объект устарел. Выполняются команды предварительной обработки. Полезно при запуске NMAKE из пакетного файла. |
| **/R** | Очищает список `.SUFFIXES` и игнорирует правила вывода и макросы, определенные в файле Tools. ini или предопределенные. |
| **Ключ** | Отключает отображение выполненных команд. Чтобы подавить отображение в части файла makefile, используйте **\@** модификатор команды или [`.SILENT`](dot-directives.md). Чтобы установить или снять параметр **/s** для части файла makefile, используйте `!CMDSWITCHES`. |
| **/T** | Обновляет метки времени целевых объектов командной строки (или первого целевого объекта Makefile) и выполняет команды предварительной обработки, но не запускает сборку. |
| **/U** | Должен использоваться в сочетании с **/n**. Выводит встроенные файлы NMAKE, чтобы выходные данные **/n** можно было использовать в качестве пакетного файла. |
| **/X** *имя_файла* | Отправляет вывод ошибок NMAKE в *filename* вместо стандартной ошибки. Пробелы или символы табуляции могут предшествовать *имени файла*. Чтобы отправить вывод ошибок в стандартный вывод, укажите в качестве *имени файла*тире (`-`). Не влияет на выходные данные команд до стандартной ошибки. |
| **/Y** | Отключает правила вывода в пакетном режиме. Если выбран этот параметр, все правила вывода в пакетном режиме обрабатываются как обычные правила вывода. |

## <a name="toolsini-and-nmake"></a>Tools.ini и NMAKE

Программа NMAKE считывает файл Tools. ini перед чтением файлов makefile, если не используется **/r** . Сначала ищет Tools. ini в текущем каталоге, а затем в каталоге, указанном в переменной среды INIT. Раздел параметров NMAKE в файле инициализации начинается с `[NMAKE]` и может содержать сведения о файлах Makefile. Укажите комментарий в отдельной строке, начинающейся со знака решетки (`#`).

## <a name="exit-codes-from-nmake"></a>Коды выхода из NMAKE

NMAKE возвращает следующие коды выхода:

| Код | Значение |
| ---------- | ------------- |
| 0 | Без ошибок (возможно, предупреждение) |
| 1 | Неполная сборка (выдана, только если используется **/k** ) |
| 2 | Ошибка программы, возможно, вызвана одной из следующих причин:<br /> -Синтаксическая ошибка в файле Makefile<br /> — Ошибка или код выхода из команды;<br /> — Прерывание пользователем; |
| 4 | Системная ошибка — недостаточно памяти |
| 255 | Целевой объект не является актуальным (выдается, только если используется **/q** ) |

## <a name="see-also"></a>См. также раздел

[Справочник по программе NMAKE](nmake-reference.md)
