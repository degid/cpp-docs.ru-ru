---
title: /Yu (использование файла предкомпилированного заголовка)
ms.date: 07/31/2020
f1_keywords:
- /Yu
helpviewer_keywords:
- Yu compiler option [C++]
- /Yu compiler option [C++]
- -Yu compiler option [C++]
- PCH files, use existing
- .pch files, use existing
- precompiled header files, use existing
ms.assetid: 24f1bd0e-b624-4296-a17e-d4b53e374e1f
ms.openlocfilehash: 8cccce39949f23e4ceb72807ecaef3597ab733c4
ms.sourcegitcommit: f2a135d69a2a8ef1777da60c53d58fe06980c997
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/03/2020
ms.locfileid: "87520466"
---
# <a name="yu-use-precompiled-header-file"></a>`/Yu`(Использовать предварительно скомпилированный заголовочный файл)

Предписывает компилятору использовать существующий файл предкомпилированного заголовка ( *`.pch`* ) в текущей компиляции.

## <a name="syntax"></a>Синтаксис

> **`/Yu`**\[*имя файла*]

## <a name="arguments"></a>Аргументы

*filename*<br/>
Имя файла заголовка, который включается в исходный файл с помощью `#include` директивы препроцессора.

## <a name="remarks"></a>Примечания

Имя включаемого файла должно быть одинаковым для **`/Yc`** параметра, который создает предкомпилированный заголовок, и для любого более позднего **`/Yu`** параметра, который указывает на использование предкомпилированного заголовка.

Для **`/Yc`** параметр *filename* указывает точку, в которой Предварительная компиляция останавливается; компилятор выполняет предварительную компиляцию всего кода с именем *filename* и присваивает имя результирующему предкомпилированному заголовку, используя базовое имя включаемого файла и расширение *`.pch`* .

*`.pch`* Файл должен быть создан с помощью **`/Yc`** .

Компилятор обрабатывает весь код, происходящий перед файлом.h, как предкомпилированный. Он пропускается сразу за `#include` директивой, связанной с *`.h`* файлом, использует код, содержащийся в *`.pch`* файле, а затем компилирует весь код после *имени файла*.

В командной строке между и filename не разрешается никаких пробелов **`/Yu`** . *filename*

При указании **`/Yu`** параметра без имени файла исходная программа должна содержать [`#pragma hdrstop`](../../preprocessor/hdrstop.md) директиву pragma, указывающую имя файла предкомпилированного заголовка, *`.pch`* File. В этом случае компилятор будет использовать предкомпилированный заголовок ( *`.pch`* файл) с именем [`/Fp (Name .pch file)`](fp-name-dot-pch-file.md) . Компилятор переходит к расположению этой директивы pragma и восстанавливает компилированное состояние из указанного файла предкомпилированного заголовка. Затем компилируется только код, следующий за директивой pragma. Если `#pragma hdrstop` не указывает имя файла, компилятор ищет файл с именем, производным от базового имени исходного файла с *`.pch`* расширением. Можно также использовать параметр, **`/Fp`** чтобы указать другой *`.pch`* файл.

Если указать **`/Yu`** параметр без имени файла и не указать `hdrstop` прагма-директиву, будет сформировано сообщение об ошибке, и компиляция не будет выполнена.

Если параметры **`/Yc`** _filename_ и **`/Yu`** _filename_ выполняются в одной командной строке, и обе ссылаются на одно и то же имя файла, **`/Yc`** имеет приоритет _имя_ файла, предварительно компилирует весь код до и включая именованный файл. Эта функция упрощает написание файлов Makefile.

Поскольку *`.pch`* файлы содержат сведения о среде компьютера и адреса памяти для программы, следует использовать *`.pch`* файл только на том компьютере, на котором он был создан.

Дополнительные сведения о предкомпилированных заголовках см. в следующих статьях:

- [`/Y`(Предварительно скомпилированные заголовки)](y-precompiled-headers.md)

- [Файлы предкомпилированных заголовков](../creating-precompiled-header-files.md)

### <a name="to-set-this-compiler-option-in-the-visual-studio-development-environment"></a>Установка данного параметра компилятора в среде разработки Visual Studio

1. Укажите [ `/Yc` (Создайте предварительно скомпилированный заголовочный файл)](yc-create-precompiled-header-file.md) для CPP-файла в проекте.

1. Откройте диалоговое окно **Страницы свойств** проекта. Подробнее см. в статье [Настройка компилятора C++ и свойства сборки в Visual Studio](../working-with-project-properties.md).

1. Выберите **Configuration Properties**  >  страницу свойств**C/C++**  >  **предварительно скомпилированных заголовков** свойств конфигурации C/C++.

1. Измените свойство **предкомпилированного заголовка** , создайте или **Используйте PCH-файл** в свойстве файла или в свойстве " **Создание/использование предкомпилированного заголовка** ".

### <a name="to-set-this-compiler-option-programmatically"></a>Установка данного параметра компилятора программным способом

- См. разделы <xref:Microsoft.VisualStudio.VCProjectEngine.VCCLCompilerTool.PrecompiledHeaderThrough%2A> и <xref:Microsoft.VisualStudio.VCProjectEngine.VCCLCompilerTool.UsePrecompiledHeader%2A>.

## <a name="example"></a>Пример

Если следующий код:

```cpp
#include <afxwin.h>   // Include header for class library
#include "resource.h" // Include resource definitions
#include "myapp.h"    // Include information specific to this app
...
```

компилируется с помощью командной строки `CL /YuMYAPP.H PROG.CPP` , компилятор не обрабатывает три инструкции include. Вместо этого используется предварительно скомпилированный код из *`MYAPP.pch`* , который сохраняет время, вовлеченное в предварительную обработку всех трех файлов (и любых файлов, которые они могут содержать).

Можно использовать [`/Fp (Name .pch file)`](fp-name-dot-pch-file.md) параметр с **`/Yu`** параметром, чтобы указать имя *`.pch`* файла, если оно отличается от аргумента *filename* до **`/Yc`** или базового имени исходного файла, как показано в следующем примере:

```cmd
CL /YuMYAPP.H /FpMYPCH.pch PROG.CPP
```

Эта команда задает файл предкомпилированного заголовка с именем *`MYPCH.pch`* . Компилятор использует его содержимое для восстановления предварительно скомпилированного состояния всех файлов заголовков до и включительно *`MYAPP.h`* . Затем компилятор компилирует код, который выполняется после `#include "MYAPP.h"` директивы *.

## <a name="see-also"></a>См. также

[Параметры компилятора КОМПИЛЯТОРОМ MSVC](compiler-options.md)<br/>
[Синтаксис командной строки компилятора MSVC](compiler-command-line-syntax.md)
