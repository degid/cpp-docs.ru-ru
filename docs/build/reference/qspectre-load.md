---
title: /кспектре-лоад
description: Описывает параметр/Кспектре-лоад Microsoft CC++ /COMPILER (компилятором MSVC).
ms.date: 01/28/2020
helpviewer_keywords:
- /Qspectre-load
ms.openlocfilehash: a766cf9b7eef11b7c5819cbdaa7706ab5b80c608
ms.sourcegitcommit: 0f4ee9056d65043fa5a715f0ad1031c0ed30e2b6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/05/2020
ms.locfileid: "77035556"
---
# <a name="qspectre-load"></a>/кспектре-лоад

Указывает создание компилятором инструкций сериализации для каждой инструкции загрузки. Этот параметр расширяет флаг **/Qspectre** , устраняя при этом любые возможные **атаки на стороне параллельного выполнения** на основе нагрузки.

## <a name="syntax"></a>Синтаксис

> **/кспектре-лоад**

## <a name="remarks"></a>Примечания

**/Кспектре-лоад** заставляет компилятор обнаружить загрузку из памяти и вставить инструкции сериализации после них. Инструкции потока управления, которые загружают память, включая `RET` и `CALL`, делятся на нагрузку и передачу потока управления. После загрузки следует `LFENCE`, чтобы обеспечить защиту нагрузки. Бывают случаи, когда компилятору не удается разделить инструкции потока управления, например инструкцию `jmp`, поэтому используется альтернативный метод устранения. Например, компилятор уменьшает `jmp [rax]`, добавляя инструкции для загрузки целевого объекта без разрушения перед вставкой ЛФЕНЦЕ, как показано ниже:

```asm
    xor rbx, [rax]
    xor rbx, [rax]  ; force a load of [rax]
    lfence          ; followed by an LFENCE
    jmp [rax]
```

Так как **/кспектре-лоад** прекращает свое влияние на все нагрузки, производительность высока. Устранение рисков не подходит для всех. При наличии критических для производительности блоков кода, которые не нуждаются в защите, их можно отключить с помощью `__declspec(spectre(nomitigation))`. Дополнительные сведения см. в разделе [__declspec устранением рисков Spectre](../../cpp/spectre.md).

Параметр **/кспектре-лоад** отключен по умолчанию и поддерживает все уровни оптимизации.

Параметр **/кспектре-лоад** доступен в Visual Studio 2019 версии 16,5 и более поздних версиях. Этот параметр доступен только в компиляторах, предназначенных для процессоров x86 и x64. Он недоступен в компиляторах, предназначенных для процессоров ARM.

### <a name="to-set-this-compiler-option-in-the-visual-studio-development-environment"></a>Установка данного параметра компилятора в среде разработки Visual Studio

1. Откройте диалоговое окно **Страницы свойств** проекта. Подробнее см. в статье [Настройка компилятора C++ и свойства сборки в Visual Studio](../working-with-project-properties.md).

2. Выберите **Свойства конфигурации** > странице свойств **создания кода** **C++ C/**  > .

3. Выберите новое значение для свойства **устранения рисков устранением рисков Spectre** . Чтобы применить изменение, нажмите кнопку **ОК**.

### <a name="to-set-this-compiler-option-programmatically"></a>Установка данного параметра компилятора программным способом

- См. раздел <xref:Microsoft.VisualStudio.VCProjectEngine.VCCLCompilerTool.AdditionalOptions%2A>.

## <a name="see-also"></a>См. также раздел

[Параметры/q (низкоуровневые операции)](q-options-low-level-operations.md)\
\ [параметров компилятора компилятором MSVC](compiler-options.md)
[Синтаксис командной строки компилятора КОМПИЛЯТОРОМ MSVC](compiler-command-line-syntax.md)
